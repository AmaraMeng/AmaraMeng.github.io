import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c,d as p,e as r,w as n,r as o,o as h,a as s,b as l}from"./app-Bhi2q-Cw.js";const u="/assets/image-20251224215839290-DWwM5-aG.png",g="/assets/image-20251226004231267-DkGBGq6_.png",y={};function d(F,a){const i=o("Tabs");return h(),c("div",null,[a[14]||(a[14]=p('<h2 id="_1-目标" tabindex="-1"><a class="header-anchor" href="#_1-目标"><span>1. 目标</span></a></h2><p>用 <code>scipy.signal.stft</code> 或 <code>librosa.stft</code> 画谱图（干净/带噪各一张）</p><h2 id="_2-准备干净语料" tabindex="-1"><a class="header-anchor" href="#_2-准备干净语料"><span>2. 准备干净语料</span></a></h2><p>准备干净的语音文件 <code>clean.wav</code> 放在合适的文件夹中。</p><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_3-生成噪声语料并画出谱图" tabindex="-1"><a class="header-anchor" href="#_3-生成噪声语料并画出谱图"><span>3. 生成噪声语料并画出谱图</span></a></h3><p>安装前一天没有安装，今天又需要的包：<code>librosa</code> 。</p><p>终端输入命令 <code>pip install librosa</code> 。</p><p>分析 GPT 给出的代码。</p>',9)),r(i,{data:[{id:"Part 1"},{id:"Part 2"},{id:"Part 3"},{id:"Part 4"},{id:"Part 5"},{id:"Part 6"},{id:"Part 7"}]},{title0:n(({value:t,isActive:e})=>[...a[0]||(a[0]=[l("Part 1",-1)])]),title1:n(({value:t,isActive:e})=>[...a[1]||(a[1]=[l("Part 2",-1)])]),title2:n(({value:t,isActive:e})=>[...a[2]||(a[2]=[l("Part 3",-1)])]),title3:n(({value:t,isActive:e})=>[...a[3]||(a[3]=[l("Part 4",-1)])]),title4:n(({value:t,isActive:e})=>[...a[4]||(a[4]=[l("Part 5",-1)])]),title5:n(({value:t,isActive:e})=>[...a[5]||(a[5]=[l("Part 6",-1)])]),title6:n(({value:t,isActive:e})=>[...a[6]||(a[6]=[l("Part 7",-1)])]),tab0:n(({value:t,isActive:e})=>[...a[7]||(a[7]=[s("div",{class:"language-python line-numbers-mode has-collapsed-lines collapsed","data-highlighter":"shiki","data-ext":"python",style:{"--vp-collapsed-lines":"15","background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," pathlib "),s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," Path")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," numpy "),s("span",{style:{color:"#F92672"}},"as"),s("span",{style:{color:"#F8F8F2"}}," np")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," librosa")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," librosa.display")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," soundfile "),s("span",{style:{color:"#F92672"}},"as"),s("span",{style:{color:"#F8F8F2"}}," sf")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," matplotlib.pyplot "),s("span",{style:{color:"#F92672"}},"as"),s("span",{style:{color:"#F8F8F2"}}," plt")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# ===== 路径设置 =====")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"ROOT"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#F8F8F2"}}," Path(__file__).resolve().parent")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"IN_WAV"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," ROOT"),s("span",{style:{color:"#F92672"}}," /"),s("span",{style:{color:"#E6DB74"}},' "clean.wav"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"NOISY_WAV"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," ROOT"),s("span",{style:{color:"#F92672"}}," /"),s("span",{style:{color:"#E6DB74"}},' "noisy.wav"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"FIG_CLEAN"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," ROOT"),s("span",{style:{color:"#F92672"}}," /"),s("span",{style:{color:"#E6DB74"}},' "spec_clean.png"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"FIG_NOISY"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," ROOT"),s("span",{style:{color:"#F92672"}}," /"),s("span",{style:{color:"#E6DB74"}},' "spec_noisy.png"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"if"),s("span",{style:{color:"#F92672"}}," not"),s("span",{style:{color:"#AE81FF"}}," IN_WAV"),s("span",{style:{color:"#F8F8F2"}},".exists():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"    raise"),s("span",{style:{color:"#66D9EF","font-style":"italic"}}," FileNotFoundError"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"f"),s("span",{style:{color:"#E6DB74"}},'"找不到：'),s("span",{style:{color:"#AE81FF"}},"{IN_WAV}"),s("span",{style:{color:"#E6DB74"}},"（cwd="),s("span",{style:{color:"#AE81FF"}},"{"),s("span",{style:{color:"#F8F8F2"}},"Path.cwd()"),s("span",{style:{color:"#AE81FF"}},"}"),s("span",{style:{color:"#E6DB74"}},'）"'),s("span",{style:{color:"#F8F8F2"}},")")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})]),s("div",{class:"collapsed-lines"})],-1),s("p",null,[s("code",null,"Path(__file__).resolve().parent"),l(" 表示 "),s("strong",null,".py 文件所在的文件夹")],-1),s("p",null,"好处：",-1),s("p",null,[l("让程序**以脚本所在文件夹为“基准点”**去找文件。"),s("br"),l(" 所以你不管：")],-1),s("ul",null,[s("li",null,[s("p",null,"用 PyCharm 跑")]),s("li",null,[s("p",null,"用 VS Code 跑")]),s("li",null,[s("p",null,"直接在 CMD / PowerShell 跑")]),s("li",null,[s("p",null,"甚至从别的目录跑"),s("blockquote",null,[s("p",null,"在终端里如果这样跑："),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"cd /d D:\\document")]),l(`
`),s("span",{class:"line"},[s("span",null,"python speech_processing\\speech_day2\\make_noisy_and_specs.py")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ul",null,[s("li",null,[s("strong",null,"cwd = D:\\document")]),s("li",null,[l("Day1 写法会去 "),s("code",null,"D:\\document\\clean.wav"),l(" 找（当然找不到）")]),s("li",null,[l("脚本目录写法会去 "),s("code",null,"D:\\...\\speech_day2\\clean.wav"),l(" 找（能找到）")])])])])],-1),s("p",null,[l("只要你的音频文件"),s("strong",null,"确实放在脚本同一个目录"),l("，一般就不会出现“因为运行目录不同导致找不到文件”。")],-1),s("hr",null,null,-1),s("p",null,[s("strong",null,"与前一天代码对比：")],-1),s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# ====== 输入文件 ======")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"INPUT_WAV"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#E6DB74"}},' "input.wav"'),s("span",{style:{color:"#88846F"}},"     # 输入音频的文件名")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"TARGET_SR"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 16000"),s("span",{style:{color:"#88846F"}},"           # 统一采样率到 16k")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# ========================")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"out_dir "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," Path("),s("span",{style:{color:"#E6DB74"}},'"."'),s("span",{style:{color:"#F8F8F2"}},")                          ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"wav_in "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," Path("),s("span",{style:{color:"#AE81FF"}},"INPUT_WAV"),s("span",{style:{color:"#F8F8F2"}},")")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[s("code",null,'Path("xxx.wav")'),l("：相对 "),s("strong",null,"cwd"),l(" 当前工作路径，因此会到当前工作路径下找文件。")],-1),s("p",null,[l("同理，输出文件位置 "),s("code",null,'Path(".")'),l(" 也是当前工作路径。")],-1),s("p",null,"因此一旦当前工作路径和文件所在文件路径不匹配，则容易出现问题。",-1),s("p",null,null,-1)])]),tab1:n(({value:t,isActive:e})=>[...a[8]||(a[8]=[s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# ===== Step A：读取 clean，并统一采样率 =====")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"SR"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 16000")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"y, sr "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," librosa.load("),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"str"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#AE81FF"}},"IN_WAV"),s("span",{style:{color:"#F8F8F2"}},"), "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"sr"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"SR"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"mono"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"True"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},'"Loaded:"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"IN_WAV"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},'"len:"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#66D9EF"}},"len"),s("span",{style:{color:"#F8F8F2"}},"(y), "),s("span",{style:{color:"#E6DB74"}},'"sr:"'),s("span",{style:{color:"#F8F8F2"}},", sr)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[s("strong",null,[s("code",null,"SR = 16000"),l(" ：")]),l(" 先设定“目标采样率”为 16k。后面读入时会按这个来。")],-1),s("p",null,[s("strong",null,[s("code",null,"y, sr = librosa.load(str(IN_WAV), sr=SR, mono=True)"),l(" ：")])],-1),s("p",null,"这行做了三件事：",-1),s("ol",null,[s("li",null,[s("strong",null,"从 IN_WAV 读音频"),l("（IN_WAV 是文件路径）")]),s("li",null,[s("code",null,"mono=True"),l("：把音频变成"),s("strong",null,"单声道"),s("ul",null,[s("li",null,"如果原来是双声道，librosa 会把左右声道做平均/合并")])]),s("li",null,[s("code",null,"sr=SR"),l("：把音频"),s("strong",null,"重采样到 16k"),s("ul",null,[s("li",null,"如果原来不是 16k（比如 44.1k），librosa 会自动 resample"),s("li",null,"如果原来就是 16k，它就不改")])])],-1),s("p",null,"返回值：",-1),s("ul",null,[s("li",null,[s("code",null,"y"),l("：一维 numpy 数组（波形，浮点数，通常范围在 [-1,1]）")]),s("li",null,[s("code",null,"sr"),l("：实际返回的采样率（因为你传了 "),s("code",null,"sr=16000"),l("，所以基本就是 16000）")])],-1),s("p",null,[s("strong",null,[s("code",null,'print("Loaded:", IN_WAV, "len:", len(y), "sr:", sr)'),l(" ：")])],-1),s("p",null,[l("打印确认：读到了哪个文件、样本点数是多少、采样率是多少。 "),s("code",null,"len(y)"),l(" 是“采样点数”，如果想看“秒数”可以再算："),s("code",null,"len(y)/sr"),l(" 。")],-1),s("p",null,null,-1)])]),tab2:n(({value:t,isActive:e})=>[...a[9]||(a[9]=[s("div",{class:"language-python line-numbers-mode has-collapsed-lines collapsed","data-highlighter":"shiki","data-ext":"python",style:{"--vp-collapsed-lines":"15","background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# ===== Step B：按目标 SNR 加白噪声 =====")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"def"),s("span",{style:{color:"#A6E22E"}}," add_white_noise_to_snr"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"clean"),s("span",{style:{color:"#F8F8F2"}},": np.ndarray, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"snr_db"),s("span",{style:{color:"#F8F8F2"}},": "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"float"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"seed"),s("span",{style:{color:"#F8F8F2"}},": "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"int"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 0"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    rng "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.random.default_rng(seed)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    noise "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," rng.standard_normal("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"size"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}},"clean.shape)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    p_sig "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.mean(clean"),s("span",{style:{color:"#F92672"}},"**"),s("span",{style:{color:"#AE81FF"}},"2"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#F92672"}},"+"),s("span",{style:{color:"#AE81FF"}}," 1e-12")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    p_noise "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.mean(noise"),s("span",{style:{color:"#F92672"}},"**"),s("span",{style:{color:"#AE81FF"}},"2"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#F92672"}},"+"),s("span",{style:{color:"#AE81FF"}}," 1e-12")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    scale "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.sqrt(p_sig "),s("span",{style:{color:"#F92672"}},"/"),s("span",{style:{color:"#F8F8F2"}}," (p_noise "),s("span",{style:{color:"#F92672"}},"*"),s("span",{style:{color:"#F8F8F2"}}," ("),s("span",{style:{color:"#AE81FF"}},"10"),s("span",{style:{color:"#F92672"}}," **"),s("span",{style:{color:"#F8F8F2"}}," (snr_db "),s("span",{style:{color:"#F92672"}},"/"),s("span",{style:{color:"#AE81FF"}}," 10"),s("span",{style:{color:"#F8F8F2"}},"))))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    noisy "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," clean "),s("span",{style:{color:"#F92672"}},"+"),s("span",{style:{color:"#F8F8F2"}}," noise "),s("span",{style:{color:"#F92672"}},"*"),s("span",{style:{color:"#F8F8F2"}}," scale")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"    # 防削波：超过[-1,1]就整体缩放")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    peak "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.max(np.abs(noisy))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"    if"),s("span",{style:{color:"#F8F8F2"}}," peak "),s("span",{style:{color:"#F92672"}},">"),s("span",{style:{color:"#AE81FF"}}," 0.99"),s("span",{style:{color:"#F8F8F2"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        noisy "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," noisy "),s("span",{style:{color:"#F92672"}},"/"),s("span",{style:{color:"#F8F8F2"}}," peak "),s("span",{style:{color:"#F92672"}},"*"),s("span",{style:{color:"#AE81FF"}}," 0.99"),s("span",{style:{color:"#88846F"}},"      # 这里没有括号，实际上是 noisy × （0.99/peak）")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"    return"),s("span",{style:{color:"#F8F8F2"}}," noisy.astype(np.float32)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})]),s("div",{class:"collapsed-lines"})],-1),s("p",null,[s("strong",null,"给 clean 波形加一段白噪声，并把噪声强度调到你指定的 SNR（比如 5 dB）"),l("，然后把合成后的 "),s("code",null,"noisy.wav"),l(" 保存出来。")],-1),s("p",null,[s("strong",null,[s("code",null,"def add_white_noise_to_snr(clean: np.ndarray, snr_db: float, seed: int = 0):"),l(" ：")])],-1),s("p",null,[l("定义一个函数：输入干净语音 "),s("code",null,"clean"),l("、目标 "),s("code",null,"snr_db"),l("，输出带噪语音。")],-1),s("p",null,[s("code",null,"np.ndarray"),l(" 指的是 "),s("strong",null,"NumPy 的数组类型"),l("（n-dimensional array，n 维数组）")],-1),s("p",null,[s("code",null,"seed"),l(" 是随机种子：让你每次运行得到同一段噪声，方便复现实验。")],-1),s("blockquote",null,[s("h3",{id:"_1-seed-在代码里到底控制了什么",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-seed-在代码里到底控制了什么"},[s("span",null,"1）seed 在代码里到底控制了什么？")])]),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"rng = np.random.default_rng(seed)")]),l(`
`),s("span",{class:"line"},[s("span",null,"noise = rng.standard_normal(size=clean.shape)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ul",null,[s("li",null,[s("code",null,"default_rng(seed)"),l("：用 seed 初始化一个随机数生成器")]),s("li",null,[s("code",null,"standard_normal(...)"),l("：从这个生成器里抽样，生成噪声")])]),s("p",null,[l("所以 "),s("strong",null,"seed 直接决定了 noise 长什么样"),l("（哪一串随机数）。")]),s("hr"),s("h3",{id:"_2-常见-4-种使用场景",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-常见-4-种使用场景"},[s("span",null,"2）常见 4 种使用场景")])]),s("h4",{id:"情况-a-固定-seed",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#情况-a-固定-seed"},[s("span",null,"情况 A：固定 seed")])]),s("p",null,"目的：每次运行结果一致，方便你判断“代码改动带来的变化”。"),s("p",null,"做法："),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"seed = 0  # 固定")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])]),s("p",null,"改 STFT 参数/画图参数时，噪声不变，变化就只来自你的改动。"),s("hr"),s("h4",{id:"情况-b-要做-稳健结果-论文实验更严谨",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#情况-b-要做-稳健结果-论文实验更严谨"},[s("span",null,"情况 B：要做“稳健结果”（论文实验更严谨）")])]),s("p",null,"目的：结果不依赖某一条噪声的“运气”，而是对多个随机噪声平均。"),s("p",null,"做法：跑多个 seed，取平均/方差："),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"seeds = [0, 1, 2, 3, 4]")]),l(`
`),s("span",{class:"line"},[s("span",null,"for s in seeds:")]),l(`
`),s("span",{class:"line"},[s("span",null,"    noisy = add_white_noise_to_snr(clean, 5.0, seed=s)")]),l(`
`),s("span",{class:"line"},[s("span",null,"    # 跑算法 -> 算指标 -> 记录")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("p",null,"最后汇报：平均提升多少 dB、标准差多少（哪怕只做 3 个 seed 也比 1 个强）。"),s("hr"),s("h4",{id:"情况-c-要-每次都生成不同-noisy-不想重复",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#情况-c-要-每次都生成不同-noisy-不想重复"},[s("span",null,"情况 C：要“每次都生成不同 noisy”（不想重复）")])]),s("p",null,"目的：每次运行都想得到新的噪声样本。"),s("p",null,[l("做法 1：用时间相关的随机种子（最简单：不传 seed）"),s("br"),l(" 在 NumPy 里你可以让它自动用系统熵初始化：")]),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"rng = np.random.default_rng()  # 不给seed")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])]),s("p",null,[l("对应此处的函数，可以把 seed 默认值改成 "),s("code",null,"None"),l("：")]),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"def add_white_noise_to_snr(clean, snr_db, seed=None):")]),l(`
`),s("span",{class:"line"},[s("span",null,"    rng = np.random.default_rng(seed)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ul",null,[s("li",null,[s("code",null,"seed=None"),l(" → 每次噪声都不一样（更“随机”）")])]),s("p",null,[l("做法 2：手动换 seed（更可控）"),s("br"),l(" 比如用当前日期/实验编号：")]),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"seed = 20251224")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])]),s("hr"),s("h4",{id:"情况-d-想-可复现-可追踪-最像论文工程",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#情况-d-想-可复现-可追踪-最像论文工程"},[s("span",null,"情况 D：想“可复现 + 可追踪”（最像论文工程）")])]),s("p",null,"目的：既能生成不同 noisy，又能以后完全复现同一个 noisy。"),s("p",null,"做法：把 seed 写进文件名/日志："),s("ul",null,[s("li",null,[s("code",null,"noisy_snr5_seed0.wav")]),s("li",null,[s("code",null,"noisy_snr5_seed1.wav")])]),s("p",null,"这样“这张图对应哪条 noisy”，就能立刻复现。"),s("hr"),s("h3",{id:"_3-几个可能会踩的坑",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-几个可能会踩的坑"},[s("span",null,"3）几个可能会踩的坑")])]),s("h4",{id:"坑-1-同-seed-同结果-如果改了-noise-的长度",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#坑-1-同-seed-同结果-如果改了-noise-的长度"},[s("span",null,"坑 1：同 seed ≠ 同结果（如果改了 noise 的长度）")])]),s("p",null,"同一个 seed 生成的是“随机序列”，但你取多少个点会影响结果："),s("ul",null,[s("li",null,"音频长度变了（更长/更短）"),s("li",null,[s("code",null,"size=clean.shape"),l(" 就变了"),s("br"),l(" → 得到的噪声也会不同（因为截取的序列长度不一样）")])]),s("p",null,[l("所以做“严格对比”时，"),s("strong",null,"输入长度最好固定"),l("。")]),s("hr"),s("h4",{id:"坑-2-同-seed-在不同库-不同算法里不一定完全一致",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#坑-2-同-seed-在不同库-不同算法里不一定完全一致"},[s("span",null,"坑 2：同 seed 在不同库/不同算法里不一定完全一致")])]),s("p",null,[l("现在用的是 NumPy 的 "),s("code",null,"default_rng"),l("，它在 NumPy 内部是稳定的。"),s("br"),l(" 但如果你换成别的库的随机数（Python "),s("code",null,"random"),l("、PyTorch、TF），seed 机制不通用。")])],-1),s("hr",null,null,-1),s("p",null,[s("strong",null,[s("code",null,"rng = np.random.default_rng(seed)"),l(" ：")]),s("br"),l(" 创建一个随机数生成器对象 rng。")],-1),s("p",null,[s("code",null,"default_rng"),l(" 是 "),s("code",null,"Numpy"),l(" 推荐的新接口，比老的 "),s("code",null,"np.random.seed()"),l(" 更好用、更可控。")],-1),s("p",null,"seed 一样 → 生成的随机序列就一样。",-1),s("hr",null,null,-1),s("p",null,[s("strong",null,[s("code",null,"noise = rng.standard_normal(size=clean.shape)"),l(" ：")]),s("br"),l(" 生成一段噪声数组 noise，长度和 clean 完全一致。")],-1),s("p",null,[s("code",null,"standard_normal"),l(" 生成的是 高斯噪声：均值 0、标准差 1。")],-1),s("p",null,"之所以叫“白噪声”：它的频谱在各频率上（理想情况下）平均分布，不偏向某个频段。",-1),s("p",null,"此时的 noise 强度是“默认的”，跟你的 clean 的强度没关系，所以还不能直接加。",-1),s("hr",null,null,-1),s("p",null,[s("strong",null,[s("code",null,"p_sig = np.mean(clean**2) + 1e-12"),l(" ：")]),s("br"),l(" 这行在算干净语音的平均功率（power）。")],-1),s("p",null,"clean**2：每个采样点平方（类似能量）",-1),s("p",null,"np.mean(...)：对整段取平均，得到“每个采样点平均能量”，在信号处理中常用作功率估计。",-1),s("ul",null,[s("li",null,"1e-12：避免极端情况下 clean 全是 0 导致后面除 0。")],-1),s("p",null,"你可以把 p_sig 理解成：这段语音整体有多“响”（更准确说是平均能量大小）。",-1),s("hr",null,null,-1),s("p",null,[s("strong",null,[s("code",null,"p_noise = np.mean(noise**2) + 1e-12"),l(" ：")])],-1),s("p",null,"同理，这行算的是刚生成的那段噪声的平均功率。",-1),s("p",null,"因为 noise 是标准高斯，理论上它功率大约接近 1，但实际会有波动，所以这里也算一下更稳。",-1),s("hr",null,null,-1),s("p",null,[s("strong",null,"我们知道了 “信号有多强” 和 “当前噪声有多强”")],-1),s("p",null,[l("接下来关键问题："),s("strong",null,"要把噪声乘多少倍，才能达到所需的 snr_db？")],-1),s("p",null,[s("strong",null,[s("code",null,"scale = np.sqrt(p_sig / (p_noise * (10 ** (snr_db / 10))))"),l(" ：")])],-1),s("p",null,"算出噪声要乘多少倍，才能让加到 clean 上后的信噪比等于 snr_db（dB）",-1),s("blockquote",null,[s("h3",{id:"_1-分贝的正式定义",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-分贝的正式定义"},[s("span",null,"1）分贝的正式定义")])]),s("p",null,[l("对两个"),s("strong",null,"功率"),l(),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mn",null,"2")]),s("mo",{separator:"true"},","),s("msub",null,[s("mi",null,"P"),s("mn",null,"1")])]),s("annotation",{encoding:"application/x-tex"},"P_2, P_1")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),l(" 的比值，分贝定义为：")]),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"="),s("mn",null,"10"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mn",null,"2")]),s("msub",null,[s("mi",null,"P"),s("mn",null,"1")])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"},"L_{dB} = 10\\log_{10}\\left(\\frac{P_2}{P_1}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])]),s("p",null,[l("这就是“对数单位 = 分贝”的来源："),s("strong",null,"dB 就是这样定义出来的"),l("。")]),s("h3",{id:"_2-为什么定义里有-log",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-为什么定义里有-log"},[s("span",null,"2）为什么定义里有 log？")])]),s("p",null,"因为很多实际系统（听觉、通信、放大器级联等）涉及的比值跨度很大。用对数有两个好处："),s("ul",null,[s("li",null,[s("strong",null,"把很大的范围压缩"),l("：比值从 1 到 1,000,000，用 dB 变成 0 到 60")]),s("li",null,[s("strong",null,"把乘法变加法"),l("："),s("br"),l(" 两级增益相乘 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"G"),s("mo",null,"="),s("msub",null,[s("mi",null,"G"),s("mn",null,"1")]),s("msub",null,[s("mi",null,"G"),s("mn",null,"2")])]),s("annotation",{encoding:"application/x-tex"},"G=G_1G_2")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"G"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"G"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"G"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),s("br"),l(" 在 dB 下变成 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"G"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"="),s("msub",null,[s("mi",null,"G"),s("mrow",null,[s("mn",null,"1"),s("mo",{separator:"true"},","),s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"+"),s("msub",null,[s("mi",null,"G"),s("mrow",null,[s("mn",null,"2"),s("mo",{separator:"true"},","),s("mi",null,"d"),s("mi",null,"B")])])]),s("annotation",{encoding:"application/x-tex"},"G_{dB}=G_{1,dB}+G_{2,dB}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"G"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"G"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"1"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"G"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"2"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("br"),l(" 做系统分析很方便")])]),s("h3",{id:"_3-那为什么是-10-而不是别的",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-那为什么是-10-而不是别的"},[s("span",null,"3）那为什么是 10，而不是别的？")])]),s("p",null,"这也是定义的一部分：历史上先有 “Bel（贝尔）”："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"B"),s("mi",null,"e"),s("mi",null,"l")])]),s("mo",null,"="),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mn",null,"2")]),s("msub",null,[s("mi",null,"P"),s("mn",null,"1")])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"},"L_{Bel} = \\log_{10}\\left(\\frac{P_2}{P_1}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])]),s("p",null,[l("但 1 Bel 单位还是太大了，不好用，所以改用 "),s("strong",null,"十分之一 Bel"),l("，叫 "),s("strong",null,"deci-bel（分贝）"),l("：")]),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mn",null,"1"),s("mtext",null," "),s("mi",null,"d"),s("mi",null,"B"),s("mo",null,"="),s("mn",null,"0.1"),s("mtext",null," "),s("mi",null,"B"),s("mi",null,"e"),s("mi",null,"l"),s("mo",null,"⇒"),s("msub",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"="),s("mn",null,"10"),s("mtext",null," "),s("msub",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"B"),s("mi",null,"e"),s("mi",null,"l")])])]),s("annotation",{encoding:"application/x-tex"},"1\\,dB = 0.1\\,Bel \\Rightarrow L_{dB}=10\\,L_{Bel} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05017em"}},"B"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord"},"0.1"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05017em"}},"B"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"⇒"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])])])]),s("p",null,"所以就变成了："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"L"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"="),s("mn",null,"10"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mn",null,"2")]),s("msub",null,[s("mi",null,"P"),s("mn",null,"1")])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"},"L_{dB} = 10\\log_{10}\\left(\\frac{P_2}{P_1}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"L"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])]),s("p",null,"要注意：这里面的贝尔和分贝都是单位，单位大小变为原来的十分之一，那么数值就是原来的十倍（参考厘米和毫米）。"),s("h3",{id:"_4-为什么有时是-20log",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_4-为什么有时是-20log"},[s("span",null,"4）为什么有时是 20log？")])]),s("p",null,[l("因为此时比的不是功率，而是"),s("strong",null,"幅度/振幅"),l("（电压、声压、波形幅度等）。功率跟幅度的平方成正比：")]),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"P"),s("mo",null,"∝"),s("msup",null,[s("mi",null,"A"),s("mn",null,"2")])]),s("annotation",{encoding:"application/x-tex"},"P \\propto A^2 ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"∝"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8641em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"A"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])])])])])])]),s("p",null,"代进去："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mn",null,"10"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mn",null,"2")]),s("msub",null,[s("mi",null,"P"),s("mn",null,"1")])]),s("mo",{fence:"true"},")")]),s("mo",null,"="),s("mn",null,"10"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msubsup",null,[s("mi",null,"A"),s("mn",null,"2"),s("mn",null,"2")]),s("msubsup",null,[s("mi",null,"A"),s("mn",null,"1"),s("mn",null,"2")])]),s("mo",{fence:"true"},")")]),s("mo",null,"="),s("mn",null,"20"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msub",null,[s("mi",null,"A"),s("mn",null,"2")]),s("msub",null,[s("mi",null,"A"),s("mn",null,"1")])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"},"10\\log_{10}\\left(\\frac{P_2}{P_1}\\right) =10\\log_{10}\\left(\\frac{A_2^2}{A_1^2}\\right) =20\\log_{10}\\left(\\frac{A_2}{A_1}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4434em","vertical-align":"-0.9523em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.4911em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"A"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7959em"}},[s("span",{style:{top:"-2.4337em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])]),s("span",{style:{top:"-3.0448em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2663em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"A"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-2.4519em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])]),s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2481em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.9523em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mord"},"20"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"A"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"A"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])]),s("p",null,"所以："),s("ul",null,[s("li",null,[s("strong",null,"功率比"),l(" → "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mn",null,"10"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")])]),s("annotation",{encoding:"application/x-tex"},"10\\log_{10}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9386em","vertical-align":"-0.2441em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])])])])])]),s("li",null,[s("strong",null,"幅度比"),l(" → "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mn",null,"20"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")])]),s("annotation",{encoding:"application/x-tex"},"20\\log_{10}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9386em","vertical-align":"-0.2441em"}}),s("span",{class:"mord"},"20"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])])])])])])])],-1),s("p",null,[s("strong",null,"Step 1: 先明确你想达到的目标")],-1),s("p",null,"你希望最终满足：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mtext",null,"SNR"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"="),s("mn",null,"10"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mi",null,"a"),s("mi",null,"r"),s("mi",null,"g"),s("mi",null,"e"),s("mi",null,"t")])])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"},"\\text{SNR}_{dB}=10\\log_{10}\\left(\\frac{P_{sig}}{P_{noise,target}}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord"},"SNR")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4221em","vertical-align":"-0.9721em"}}),s("span",{class:"mord"},"10"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"t")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.9721em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])],-1),s("p",null,"把它变回线性比率：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mi",null,"a"),s("mi",null,"r"),s("mi",null,"g"),s("mi",null,"e"),s("mi",null,"t")])])]),s("mo",null,"="),s("msup",null,[s("mn",null,"10"),s("mrow",null,[s("msub",null,[s("mtext",null,"SNR"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"10")])])]),s("annotation",{encoding:"application/x-tex"},"\\frac{P_{sig}}{P_{noise,target}} = 10^{\\text{SNR}_{dB}/10} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.3324em","vertical-align":"-0.9721em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"t")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.9721em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.938em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mord"},[s("span",{class:"mord"},"0"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.938em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord text mtight"},[s("span",{class:"mord mtight"},"SNR")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3448em"}},[s("span",{style:{top:"-2.3488em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1512em"}},[s("span")])])])])]),s("span",{class:"mord mtight"},"/10")])])])])])])])])])])])])],-1),s("p",null,"令",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"R"),s("mo",null,"="),s("msup",null,[s("mn",null,"10"),s("mrow",null,[s("mtext",null,"snr_db"),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"10")])])]),s("annotation",{encoding:"application/x-tex"},"R = 10^{\\text{snr\\_db}/10} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.938em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mord"},[s("span",{class:"mord"},"0"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.938em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord text mtight"},[s("span",{class:"mord mtight"},"snr_db")]),s("span",{class:"mord mtight"},"/10")])])])])])])])])])])])])],-1),s("p",null,"那么目标噪声功率应该是：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mi",null,"a"),s("mi",null,"r"),s("mi",null,"g"),s("mi",null,"e"),s("mi",null,"t")])]),s("mo",null,"="),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("mi",null,"R")])]),s("annotation",{encoding:"application/x-tex"},"P_{noise,target}=\\frac{P_{sig}}{R} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"t")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0463em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),s("p",null,"现在手里有一段“原始噪声” noise",-1),s("p",null,[l("我们生成的 "),s("code",null,"noise"),l(" 是标准高斯白噪声，它自身有一个功率，但这个功率一般不是我们想要的，所以要缩放。")],-1),s("p",null,[s("strong",null,"Step 2: 缩放噪声会怎么改变功率？")],-1),s("p",null,[l("你把噪声乘一个系数 "),s("code",null,"scale"),l("：")],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("msub",null,[s("mi",null,"e"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"e"),s("mi",null,"d")])]),s("mo",null,"="),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"e"),s("mo",null,"⋅"),s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e")]),s("annotation",{encoding:"application/x-tex"},"noise_{scaled} = scale \\cdot noise ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8095em","vertical-align":"-0.15em"}}),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"sc"),s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"d")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6595em"}}),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"se")])])])])],-1),s("p",null,"功率会变成：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"e"),s("mi",null,"d")])]),s("mo",null,"="),s("mi",{mathvariant:"double-struck"},"E"),s("mo",{stretchy:"false"},"["),s("mo",{stretchy:"false"},"("),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"e"),s("mo",null,"⋅"),s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e"),s("msup",null,[s("mo",{stretchy:"false"},")"),s("mn",null,"2")]),s("mo",{stretchy:"false"},"]"),s("mo",null,"="),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("msup",null,[s("mi",null,"e"),s("mn",null,"2")]),s("mo",null,"⋅"),s("mi",{mathvariant:"double-struck"},"E"),s("mo",{stretchy:"false"},"["),s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("msup",null,[s("mi",null,"e"),s("mn",null,"2")]),s("mo",{stretchy:"false"},"]"),s("mo",null,"="),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("msup",null,[s("mi",null,"e"),s("mn",null,"2")]),s("mo",null,"⋅"),s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e")])])]),s("annotation",{encoding:"application/x-tex"},"P_{noise,scaled} = \\mathbb{E}[(scale\\cdot noise)^2] = scale^2 \\cdot \\mathbb{E}[noise^2] = scale^2 \\cdot P_{noise} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"sc"),s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"d")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathbb"},"E"),s("span",{class:"mopen"},"[("),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1141em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"se"),s("span",{class:"mclose"},[s("span",{class:"mclose"},")"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8641em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1141em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathbb"},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8641em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])])])],-1),s("p",null,[s("strong",null,"Step 3: 让“缩放后的噪声功率”正好等于目标噪声功率")],-1),s("p",null,"你要：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("msup",null,[s("mi",null,"e"),s("mn",null,"2")]),s("mo",null,"⋅"),s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e")])]),s("mo",null,"="),s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mi",null,"a"),s("mi",null,"r"),s("mi",null,"g"),s("mi",null,"e"),s("mi",null,"t")])]),s("mo",null,"="),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("mi",null,"R")])]),s("annotation",{encoding:"application/x-tex"},"scale^2 \\cdot P_{noise} = P_{noise,target}=\\frac{P_{sig}}{R} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8641em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathnormal mtight"},"e"),s("span",{class:"mord mathnormal mtight"},"t")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0463em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),s("p",null,[l("解出 "),s("code",null,"scale"),l("：")],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("msup",null,[s("mi",null,"e"),s("mn",null,"2")]),s("mo",null,"="),s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e")])]),s("mo",null,"⋅"),s("mi",null,"R")])]),s("mspace",{width:"1em"}),s("mo",null,"⇒"),s("mspace",{width:"1em"}),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"e"),s("mo",null,"="),s("msqrt",null,[s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e")])]),s("mo",null,"⋅"),s("mi",null,"R")])])])]),s("annotation",{encoding:"application/x-tex"},"scale^2 = \\frac{P_{sig}}{P_{noise}\\cdot R} \\quad\\Rightarrow\\quad scale = \\sqrt{\\frac{P_{sig}}{P_{noise}\\cdot R}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8641em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"e"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.1963em","vertical-align":"-0.836em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"1em"}}),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"⇒"),s("span",{class:"mspace",style:{"margin-right":"1em"}}),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.44em","vertical-align":"-0.844em"}}),s("span",{class:"mord sqrt"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.596em"}},[s("span",{class:"svg-align",style:{top:"-4.4em"}},[s("span",{class:"pstrut",style:{height:"4.4em"}}),s("span",{class:"mord",style:{"padding-left":"1em"}},[s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.836em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])]),s("span",{style:{top:"-3.556em"}},[s("span",{class:"pstrut",style:{height:"4.4em"}}),s("span",{class:"hide-tail",style:{"min-width":"1.02em",height:"2.48em"}},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"2.48em",viewBox:"0 0 400000 2592",preserveAspectRatio:"xMinYMin slice"},[s("path",{d:`M424,2478
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l0 -0c4,-6.7,10,-10,18,-10 H400000
v40H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M1001 80
h400000v40h-400000z`})])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.844em"}},[s("span")])])])])])])])])],-1),s("p",null,[l("把 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"R")]),s("annotation",{encoding:"application/x-tex"},"R")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")])])]),l(" 换回 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mn",null,"10"),s("mrow",null,[s("mtext",null,"snr_db"),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"10")])])]),s("annotation",{encoding:"application/x-tex"},"10^{\\text{snr\\_db}/10}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.888em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mord"},[s("span",{class:"mord"},"0"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.888em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord text mtight"},[s("span",{class:"mord mtight"},"snr_db")]),s("span",{class:"mord mtight"},"/10")])])])])])])])])])])]),l("：")],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"e"),s("mo",null,"="),s("msqrt",null,[s("mfrac",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g")])]),s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"n"),s("mi",null,"o"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"e")])]),s("mo",null,"⋅"),s("msup",null,[s("mn",null,"10"),s("mrow",null,[s("mtext",null,"snr_db"),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"10")])])])])])]),s("annotation",{encoding:"application/x-tex"},"scale = \\sqrt{\\frac{P_{sig}}{P_{noise}\\cdot 10^{\\text{snr\\_db}/10}}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal"},"sc"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"3.04em","vertical-align":"-1.1708em"}}),s("span",{class:"mord sqrt"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.8692em"}},[s("span",{class:"svg-align",style:{top:"-5em"}},[s("span",{class:"pstrut",style:{height:"5em"}}),s("span",{class:"mord",style:{"padding-left":"1em"}},[s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.2603em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mord mathnormal mtight"},"o"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"se")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mord"},[s("span",{class:"mord"},"0"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8497em"}},[s("span",{style:{top:"-3.0248em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord text mtight"},[s("span",{class:"mord mtight"},"snr_db")]),s("span",{class:"mord mtight"},"/10")])])])])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"g")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8897em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])]),s("span",{style:{top:"-3.8292em"}},[s("span",{class:"pstrut",style:{height:"5em"}}),s("span",{class:"hide-tail",style:{"min-width":"1.02em",height:"3.08em"}},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"3.08em",viewBox:"0 0 400000 3240",preserveAspectRatio:"xMinYMin slice"},[s("path",{d:`M473,2793
c339.3,-1799.3,509.3,-2700,510,-2702 l0 -0
c3.3,-7.3,9.3,-11,18,-11 H400000v40H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM1001 80h400000v40H1017.7z`})])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.1708em"}},[s("span")])])])])])])])])],-1),s("p",null,"这就对应代码：",-1),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"scale = np.sqrt(p_sig / (p_noise * (10 ** (snr_db / 10))))")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1),s("hr",null,null,-1),s("p",null,[s("strong",null,[s("code",null,"return noisy.astype(np.float32)"),l(" ：")])],-1),s("p",null,[s("strong",null,[l("把 "),s("code",null,"noisy"),l(" 这个 NumPy 数组转换成 "),s("code",null,"float32"),l(" 类型再返回")]),l("。float32 每个数 4 字节，音频很长时，内存/写文件都更省。")],-1)])]),tab3:n(({value:t,isActive:e})=>[...a[10]||(a[10]=[s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"TARGET_SNR_DB"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 5.0"),s("span",{style:{color:"#88846F"}},"  # 0更吵，10更干净")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"noisy "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," add_white_noise_to_snr(y, "),s("span",{style:{color:"#AE81FF"}},"TARGET_SNR_DB"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"seed"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"0"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"sf.write("),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"str"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#AE81FF"}},"NOISY_WAV"),s("span",{style:{color:"#F8F8F2"}},"), noisy, "),s("span",{style:{color:"#AE81FF"}},"SR"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},'"Saved:"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"NOISY_WAV"),s("span",{style:{color:"#F8F8F2"}},")")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[l("刚才的函数实例化，带入需要的信噪比 5dB 。"),s("code",null,"y"),l(" 是干净语音的信号数组。")],-1),s("p",null,[s("code",null,"sf.write(str(NOISY_WAV), noisy, SR)"),l(" 将函数返回的加过噪声的语音数组存储下来。三个参数分别为：文件路径, 数据, 采样率。")],-1)])]),tab4:n(({value:t,isActive:e})=>[...a[11]||(a[11]=[s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# ===== Step C：STFT -> dB（两张图统一参考，保证可比）===== 这里自己按照逻辑调整了顺序")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"WINDOW"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#E6DB74"}},' "hann"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"WIN_LENGTH"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 400"),s("span",{style:{color:"#88846F"}},"   # 25ms @ 16k")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"HOP_LENGTH"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 160"),s("span",{style:{color:"#88846F"}},"   # 10ms @ 16k")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"N_FFT"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," 512")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"def"),s("span",{style:{color:"#A6E22E"}}," stft_mag"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"x"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    D "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," librosa.stft(x, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"n_fft"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"N_FFT"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"hop_length"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"HOP_LENGTH"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FD971F","font-style":"italic"}},"                     win_length"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"WIN_LENGTH"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"window"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"WINDOW"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"    return"),s("span",{style:{color:"#F8F8F2"}}," np.abs(D)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"S_clean "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," stft_mag(y)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"S_noisy "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," stft_mag(noisy)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[l("Step C 做的事可以概括成一句话："),s("strong",null,"把时域波形变成“随时间变化的频谱”（STFT），然后取幅度得到谱图的原材料。")],-1),s("p",null,[s("strong",null,"WINDOW（窗函数）")],-1),s("ul",null,[s("li",null,[s("code",null,'"hann"'),l("：把每帧边缘逐渐压小，减少频谱泄漏")]),s("li",null,"语音任务里 Hann 是默认常用选择。")],-1),s("p",null,"每帧其实是在“截取一小段信号”。直接硬截会在两端突然断开，相当于乘了一个“矩形窗”，会导致频谱泄漏更明显。",-1),s("p",null,[l("Hann 窗做的事："),s("strong",null,"把帧的两端缓慢压到 0"),l("，让截断更平滑 → 泄漏更小 → 谱图更干净。")],-1),s("p",null,[s("strong",null,"WIN_LENGTH（窗长 / 每一帧取多长）")],-1),s("ul",null,[s("li",null,[s("code",null,"WIN_LENGTH=400"),l("：每帧取 400 个采样点")]),s("li",null,[l("采样率 16k 时：400/16000 = 0.025s = "),s("strong",null,"25ms")]),s("li",null,"25ms 是语音谱图常用帧长：能看到谐波结构，也不会太糊。")],-1),s("p",null,[s("strong",null,"HOP_LENGTH（帧移 / 两帧之间隔多少点）")],-1),s("ul",null,[s("li",null,[s("code",null,"HOP_LENGTH=160"),l("：相邻两帧起点相隔 160 个点")]),s("li",null,[l("160/16000 = "),s("strong",null,"10ms")]),s("li",null,"也很常用：时间分辨率够，谱图不会太稀。")],-1),s("p",null,[s("strong",null,"FFT 点数 N_FFT（每帧用多少点来算频谱）")],-1),s("p",null,[s("code",null,"N_FFT = 512"),l(" 的意思是："),s("strong",null,"每一帧做 STFT 时，用 512 点 FFT 来把这一帧从时域变到频域"),l("。它主要带来三件事：")],-1),s("p",null,"1）它决定“频率格子（bin）有多少”和“每格多宽”",-1),s("p",null,[l("采样率 "),s("code",null,"SR=16000"),l(" 时：")],-1),s("ul",null,[s("li",null,[s("strong",null,"频率间隔")])],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"f"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"S"),s("mi",null,"R")]),s("mrow",null,[s("mi",null,"N"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"F"),s("mi",null,"F"),s("mi",null,"T")])]),s("mo",null,"="),s("mfrac",null,[s("mn",null,"16000"),s("mn",null,"512")]),s("mo",null,"="),s("mn",null,"31.25"),s("mtext",null," Hz")]),s("annotation",{encoding:"application/x-tex"},"\\Delta f=\\frac{SR}{N\\_FFT}=\\frac{16000}{512}=31.25\\text{ Hz} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.3563em","vertical-align":"-0.996em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"FFT")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"SR")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.996em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0074em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3214em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"512")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"16000")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord"},"31.25"),s("span",{class:"mord text"},[s("span",{class:"mord"}," Hz")])])])])])],-1),s("p",null,"意思是：相邻两个频率 bin 的中心频率差 31.25 Hz。",-1),s("ul",null,[s("li",null,[s("strong",null,"非负频率 bin 数"),l("（音频是实数，通常只留 0～SR/2，负频率部分与正频率是镜像的，信息是重复的）")])],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mfrac",null,[s("mrow",null,[s("mi",null,"N"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"F"),s("mi",null,"F"),s("mi",null,"T")]),s("mn",null,"2")]),s("mo",null,"+"),s("mn",null,"1"),s("mo",null,"="),s("mfrac",null,[s("mn",null,"512"),s("mn",null,"2")]),s("mo",null,"+"),s("mn",null,"1"),s("mo",null,"="),s("mn",null,"257")]),s("annotation",{encoding:"application/x-tex"},"\\frac{N\\_FFT}{2}+1=\\frac{512}{2}+1=257 ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0693em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3833em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"2")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.7em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"FFT")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0074em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3214em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"2")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"512")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"257")])])])])],-1),s("p",null,[l("所以你的谱图矩阵在频率方向通常是 "),s("strong",null,"257 行"),l("，有256个间隔。")],-1),s("p",null,"2）它决定谱图频率轴的“最高频”",-1),s("p",null,"最高频是 Nyquist：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"f"),s("mrow",null,[s("mi",null,"m"),s("mi",null,"a"),s("mi",null,"x")])]),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"S"),s("mi",null,"R")]),s("mn",null,"2")]),s("mo",null,"="),s("mn",null,"8000"),s("mtext",null," Hz")]),s("annotation",{encoding:"application/x-tex"},"f_{max}=\\frac{SR}{2}=8000\\text{ Hz} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1076em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"ma"),s("span",{class:"mord mathnormal mtight"},"x")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0463em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"2")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"SR")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord"},"8000"),s("span",{class:"mord text"},[s("span",{class:"mord"}," Hz")])])])])])],-1),s("p",null,[l("所以谱图频率范围是 "),s("strong",null,"0～8000Hz"),l("（这对 16k 语音足够了）。")],-1),s("p",null,"3）为什么常用 512（这套参数下的原因）",-1),s("p",null,[l("现在 "),s("code",null,"WIN_LENGTH=400"),l("（25ms）。FFT 点数一般取：")],-1),s("ul",null,[s("li",null,[s("strong",null,"不小于窗长"),l("（否则信息会被截断/不合理）")]),s("li",null,[s("strong",null,"常取 2 的幂"),l("（FFT 计算更高效、也更常用）")])],-1),s("p",null,[l("400 不是 2 的幂，最近的 ≥400 的 2 的幂就是 "),s("strong",null,"512"),l("。"),s("br"),l(" 所以设 "),s("code",null,"N_FFT=512"),l(" 等价于："),s("strong",null,"每帧先用 400 点窗取出有效数据，再补零到 512 点做 FFT"),l("。")],-1),s("p",null,[l("补零："),s("strong",null,"让频率轴网格更密、谱图更平滑"),l("（但不会凭空增加真正的分辨能力）。")],-1),s("blockquote",null,[s("p",null,[s("strong",null,"把每帧长度不够的部分用 0 填满，让 FFT 计算用固定的 512 点长度"),l("。")]),s("p",null,"具体到这组参数："),s("ul",null,[s("li",null,[l("每帧真正取出来的是 "),s("code",null,"WIN_LENGTH=400"),l(" 个点（25ms）")]),s("li",null,[l("但让 FFT 用 "),s("code",null,"N_FFT=512"),l(" 点来算")])]),s("p",null,"所以库会做一件事："),s("blockquote",null,[s("p",null,"把这 400 个点后面再接上 112 个 0，变成 512 点，然后对这 512 点做 FFT")]),s("p",null,"用符号写就是："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"x"),s("mn",null,"512")]),s("mo",null,"="),s("mo",{stretchy:"false"},"["),s("msub",null,[s("mi",null,"x"),s("mn",null,"0")]),s("mo",{separator:"true"},","),s("mo",null,"…"),s("mo",{separator:"true"},","),s("msub",null,[s("mi",null,"x"),s("mn",null,"399")]),s("mo",{separator:"true"},","),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mo",null,"…"),s("mo",{separator:"true"},","),s("mn",null,"0"),s("mo",{stretchy:"false"},"]"),s("mspace",{width:"1em"}),s("mo",{stretchy:"false"},"("),s("mtext",null,"后面补 "),s("mn",null,"112"),s("mtext",null," 个0"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"x_{512} = [x_0,\\dots,x_{399},0,\\dots,0] \\quad (\\text{后面补 }112\\text{ 个0}) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.5806em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"512")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"["),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"0")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},"…"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"399")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},"…"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"1em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"后面补"),s("span",{class:"mord"}," ")]),s("span",{class:"mord"},"112"),s("span",{class:"mord text"},[s("span",{class:"mord"}," "),s("span",{class:"mord cjk_fallback"},"个"),s("span",{class:"mord"},"0")]),s("span",{class:"mclose"},")")])])])])]),s("hr"),s("h3",{id:"为什么要补零",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#为什么要补零"},[s("span",null,"为什么要补零？")])]),s("h4",{id:"_1-让频率轴更-细-bin-更密",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-让频率轴更-细-bin-更密"},[s("span",null,"1）让频率轴更“细”（bin 更密）")])]),s("p",null,"频率间隔是："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"f"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"S"),s("mi",null,"R")]),s("mrow",null,[s("mi",null,"N"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"F"),s("mi",null,"F"),s("mi",null,"T")])])]),s("annotation",{encoding:"application/x-tex"},"\\Delta f = \\frac{SR}{N\\_FFT} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.3563em","vertical-align":"-0.996em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"FFT")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"SR")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.996em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])]),s("ul",null,[s("li",null,[l("用 400 点做 FFT："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"f"),s("mo",null,"="),s("mn",null,"16000"),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"400"),s("mo",null,"="),s("mn",null,"40")]),s("annotation",{encoding:"application/x-tex"},"\\Delta f=16000/400=40")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"16000/400"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"40")])])]),l(" Hz")]),s("li",null,[l("用 512 点做 FFT："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("mi",null,"f"),s("mo",null,"="),s("mn",null,"16000"),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"512"),s("mo",null,"="),s("mn",null,"31.25")]),s("annotation",{encoding:"application/x-tex"},"\\Delta f=16000/512=31.25")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"Δ"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"16000/512"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"31.25")])])]),l(" Hz")])]),s("p",null,"所以补零后，你的频率格子更密，谱图看起来更平滑、更像“高分辨率的网格”。"),s("h4",{id:"_2-计算更方便-更快-2-的幂-fft",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-计算更方便-更快-2-的幂-fft"},[s("span",null,"2）计算更方便/更快（2 的幂 FFT）")])]),s("p",null,[l("512 是 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mn",null,"2"),s("mn",null,"9")])]),s("annotation",{encoding:"application/x-tex"},"2^9")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8141em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"2"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"9")])])])])])])])])])]),l("，FFT 算法对 2 的幂长度通常更高效、实现也更成熟。")]),s("hr"),s("h3",{id:"重要-补零不会-凭空增加信息",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#重要-补零不会-凭空增加信息"},[s("span",null,"重要：补零不会“凭空增加信息”")])]),s("p",null,[l("补零只是让频谱在频率轴上"),s("strong",null,"插值更密"),l("，看起来更平滑；"),s("br"),s("strong",null,"真正能分辨多细的频率细节，主要还是由窗长 400 点决定的"),l("。")]),s("p",null,"可以把它类比成："),s("ul",null,[s("li",null,"窗长 400：你用 25ms 的“观察时间”"),s("li",null,"N_FFT 512：你把频率坐标尺刻得更细，但观察时间没变")]),s("p",null,[s("strong",null,"补零 = 把频谱“画得更细”，不是“听得更细”。")])],-1),s("hr",null,null,-1),s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"def"),s("span",{style:{color:"#A6E22E"}}," stft_mag"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"x"),s("span",{style:{color:"#F8F8F2"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    D "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," librosa.stft(x, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"n_fft"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"N_FFT"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"hop_length"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"HOP_LENGTH"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FD971F","font-style":"italic"}},"                     win_length"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"WIN_LENGTH"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"window"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"WINDOW"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"    return"),s("span",{style:{color:"#F8F8F2"}}," np.abs(D)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[s("code",null,"D"),l(" 是 "),s("strong",null,"复数矩阵"),l("（complex）")],-1),s("p",null,"形状：",-1),s("ul",null,[s("li",null,[l("行："),s("code",null,"N_FFT/2 + 1"),l("（因为输入是实数，只保留非负频率）")]),s("li",null,"列：由音频长度和 hop 决定的帧数")],-1),s("p",null,[s("code",null,"np.abs(D)"),l(" 为什么是谱图？")],-1),s("p",null,[s("code",null,"D"),l(" 每个元素是复数：")],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"D"),s("mo",{stretchy:"false"},"["),s("mi",null,"f"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},"]"),s("mo",null,"="),s("mi",null,"a"),s("mo",null,"+"),s("mi",null,"j"),s("mi",null,"b")]),s("annotation",{encoding:"application/x-tex"},"D[f,t] = a + jb ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"D"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6667em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal"},"jb")])])])])],-1),s("p",null,"复数包含两部分信息：",-1),s("ul",null,[s("li",null,[s("strong",null,"幅度（强度）"),l("："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"D"),s("mo",{stretchy:"false"},"["),s("mi",null,"f"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},"]"),s("mi",{mathvariant:"normal"},"∣")]),s("annotation",{encoding:"application/x-tex"},"|D[f,t]|")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"D"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},"]"),s("span",{class:"mord"},"∣")])])])]),s("li",null,[s("strong",null,"相位（角度）"),l("："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"∠"),s("mi",null,"D"),s("mo",{stretchy:"false"},"["),s("mi",null,"f"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"\\angle D[f,t]")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"∠"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"D"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},"]")])])])])],-1),s("p",null,[s("code",null,"np.abs(D)"),l(" 就是在做：")],-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"D"),s("mo",{stretchy:"false"},"["),s("mi",null,"f"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},"]"),s("mi",{mathvariant:"normal"},"∣"),s("mo",null,"="),s("msqrt",null,[s("mrow",null,[s("msup",null,[s("mi",null,"a"),s("mn",null,"2")]),s("mo",null,"+"),s("msup",null,[s("mi",null,"b"),s("mn",null,"2")])])])]),s("annotation",{encoding:"application/x-tex"},"|D[f,t]| = \\sqrt{a^2 + b^2} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"D"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},"]"),s("span",{class:"mord"},"∣"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.24em","vertical-align":"-0.1777em"}}),s("span",{class:"mord sqrt"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.0623em"}},[s("span",{class:"svg-align",style:{top:"-3.2em"}},[s("span",{class:"pstrut",style:{height:"3.2em"}}),s("span",{class:"mord",style:{"padding-left":"1em"}},[s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"a"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7401em"}},[s("span",{style:{top:"-2.989em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"b"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7401em"}},[s("span",{style:{top:"-2.989em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])])])]),s("span",{style:{top:"-3.0223em"}},[s("span",{class:"pstrut",style:{height:"3.2em"}}),s("span",{class:"hide-tail",style:{"min-width":"1.02em",height:"1.28em"}},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.28em",viewBox:"0 0 400000 1296",preserveAspectRatio:"xMinYMin slice"},[s("path",{d:`M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z`})])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1777em"}},[s("span")])])])])])])])])],-1),s("p",null,[l("这就是谱图最常画的东西："),s("strong",null,"能量/强度随时间和频率的分布"),l("。")],-1),s("hr",null,null,-1),s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"S_clean "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," stft_mag(y)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"S_noisy "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," stft_mag(noisy)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,"将干净和噪声的谱图实例化。",-1)])]),tab5:n(({value:t,isActive:e})=>[...a[12]||(a[12]=[s("div",{class:"language-python line-numbers-mode","data-highlighter":"shiki","data-ext":"python",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"# 关键：两张图用同一个 ref（用 clean 的最大值）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ref "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," np.max(S_clean) "),s("span",{style:{color:"#F92672"}},"+"),s("span",{style:{color:"#AE81FF"}}," 1e-12")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"S_clean_db "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," librosa.amplitude_to_db(S_clean, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ref"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}},"ref)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"S_noisy_db "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," librosa.amplitude_to_db(S_noisy, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ref"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}},"ref)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[l("这段代码是在把“线性幅度谱”转换成 "),s("strong",null,"dB（对数刻度）"),l("，并且确保 "),s("strong",null,"clean 和 noisy 两张图用同一把尺子"),l("，这样颜色深浅才可直接比较。")],-1),s("p",null,[s("strong",null,[s("code",null,"ref = np.max(S_clean) + 1e-12"),l(" ：")])],-1),s("ul",null,[s("li",null,[s("code",null,"S_clean"),l(" 是 clean 的幅度谱矩阵（都是非负数）。")]),s("li",null,[s("code",null,"np.max(S_clean)"),l(" 取的是 "),s("strong",null,"clean 全部时频点里最大的幅度"),l("。")]),s("li",null,[s("code",null,"+ 1e-12"),l(" 是为了防止极端情况 ref=0（避免除 0 或 log(0)）。")])],-1),s("p",null,[l("所以 "),s("code",null,"ref"),l(" 就是一个标尺："),s("strong",null,"把 clean 的最大幅度当作 0 dB 的基准"),l("。")],-1),s("p",null,[s("strong",null,[s("code",null,"librosa.amplitude_to_db(S, ref=ref)"),l(" 在算什么？")])],-1),s("p",null,"它做的本质是：",-1),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"S"),s("mrow",null,[s("mi",null,"d"),s("mi",null,"B")])]),s("mo",null,"="),s("mn",null,"20"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("mi",null,"S"),s("mrow",null,[s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"f")])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"},"S_{dB} = 20\\log_{10}\\left(\\frac{S}{ref}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0576em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"d"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05017em"}},"B")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mord"},"20"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"re"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8804em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])],-1),s("p",null,"所以：",-1),s("ul",null,[s("li",null,[l("当 "),s("code",null,"S == ref"),l(" 时："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mn",null,"20"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mo",{stretchy:"false"},"("),s("mn",null,"1"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mn",null,"0")]),s("annotation",{encoding:"application/x-tex"},"20\\log_{10}(1)=0")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"20"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"0")])])]),l(" dB"),s("br"),l(" → "),s("strong",null,"最大幅度点是 0 dB")]),s("li",null,[l("当 "),s("code",null,"S"),l(" 比 "),s("code",null,"ref"),l(" 小 10 倍："),s("br"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mn",null,"20"),s("msub",null,[s("mrow",null,[s("mi",null,"log"),s("mo",null,"⁡")]),s("mn",null,"10")]),s("mo",{stretchy:"false"},"("),s("mn",null,"0.1"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mo",null,"−"),s("mn",null,"20")]),s("annotation",{encoding:"application/x-tex"},"20\\log_{10}(0.1)=-20")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"20"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[l("lo"),s("span",{style:{"margin-right":"0.01389em"}},"g")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.207em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"10")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2441em"}},[s("span")])])])])]),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"0.1"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),s("span",{class:"mord"},"−"),s("span",{class:"mord"},"20")])])]),l(" dB")]),s("li",null,"小 100 倍：-40 dB"),s("li",null,"小 1000 倍：-60 dB")],-1),s("blockquote",null,[s("p",null,"这就是为什么谱图常用 dB：能把很大的动态范围压缩，细节更容易看见。")],-1),s("p",null,[s("strong",null,"优化小建议（更稳、更“论文范”）")],-1),s("p",null,"有时 clean 的最大值可能是某个瞬时尖峰，导致整体都偏暗。更稳的做法是用百分位数做 ref：",-1),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"ref = np.percentile(S_clean, 99.9) + 1e-12")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1),s("p",null,[l("取 "),s("code",null,"S_clean"),l(" 里"),s("strong",null,"99.9% 分位数"),l("对应的值，这样 0 dB 对应“接近最大但不被极端点支配”的能量，更好看、更稳定。")],-1)])]),tab6:n(({value:t,isActive:e})=>[...a[13]||(a[13]=[s("div",{class:"language-python line-numbers-mode has-collapsed-lines collapsed","data-highlighter":"shiki","data-ext":"python",style:{"--vp-collapsed-lines":"15","background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"VMIN"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"VMAX"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#F92672"}}," -"),s("span",{style:{color:"#AE81FF"}},"80"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"0")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.figure()       "),s("span",{style:{color:"#88846F"}},"# 新建一张空画布（一个 figure）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"librosa.display.specshow(S_clean_db, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"sr"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"SR"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"hop_length"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"HOP_LENGTH"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FD971F","font-style":"italic"}},"                         x_axis"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#E6DB74"}},'"time"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"y_axis"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#E6DB74"}},'"linear"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"vmin"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"VMIN"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"vmax"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"VMAX"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.colorbar("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"format"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#E6DB74"}},'"'),s("span",{style:{color:"#AE81FF"}},"%+2.0f"),s("span",{style:{color:"#E6DB74"}},' dB"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.title("),s("span",{style:{color:"#E6DB74"}},'"CLEAN Spectrogram"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.tight_layout()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.savefig("),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"str"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#AE81FF"}},"FIG_CLEAN"),s("span",{style:{color:"#F8F8F2"}},"), "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"dpi"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"200"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},'"Saved:"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"FIG_CLEAN"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.figure()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"librosa.display.specshow(S_noisy_db, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"sr"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"SR"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"hop_length"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"HOP_LENGTH"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FD971F","font-style":"italic"}},"                         x_axis"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#E6DB74"}},'"time"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"y_axis"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#E6DB74"}},'"linear"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"vmin"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"VMIN"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"vmax"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"VMAX"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.colorbar("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"format"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#E6DB74"}},'"'),s("span",{style:{color:"#AE81FF"}},"%+2.0f"),s("span",{style:{color:"#E6DB74"}},' dB"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.title("),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"f"),s("span",{style:{color:"#E6DB74"}},'"NOISY Spectrogram (SNR='),s("span",{style:{color:"#AE81FF"}},"{TARGET_SNR_DB}"),s("span",{style:{color:"#E6DB74"}},' dB)"'),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.tight_layout()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.savefig("),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"str"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#AE81FF"}},"FIG_NOISY"),s("span",{style:{color:"#F8F8F2"}},"), "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"dpi"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"200"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"plt.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF"}},"print"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},'"Saved:"'),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"FIG_NOISY"),s("span",{style:{color:"#F8F8F2"}},")")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})]),s("div",{class:"collapsed-lines"})],-1),s("p",null,[l("后面画谱图一般会写（无论是 "),s("code",null,"specshow"),l(" 还是 "),s("code",null,"imshow"),l("）：")],-1),s("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",{class:"language-"},[s("span",{class:"line"},[s("span",null,"librosa.display.specshow(S_db, vmin=VMIN, vmax=VMAX)")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1),s("ul",null,[s("li",null,[s("code",null,"vmax=0"),l("：把 "),s("strong",null,"0 dB"),l(" 显示成最亮/最热的颜色")]),s("li",null,[s("code",null,"vmin=-80"),l("：把 "),s("strong",null,"-80 dB"),l(" 以及更低的部分都压到最暗（当成背景）")])],-1),s("blockquote",null,[s("p",null,[l("超过 "),s("code",null,"vmax"),l(" 的值会“饱和为最亮”，低于 "),s("code",null,"vmin"),l(" 的值会“饱和为最暗”。")]),s("p",null,[s("code",null,"VMIN"),l(" 决定你想显示到“多弱的能量”：")]),s("ul",null,[s("li",null,[s("strong",null,"VMIN 越小（更负，如 -90）"),s("br"),l(" → 把更弱的东西也显示出来"),s("br"),l(" → 细节更多，但背景/噪声也更容易“脏、雾”")]),s("li",null,[s("strong",null,"VMIN 越大（不那么负，如 -60）"),s("br"),l(" → 把弱能量直接压黑"),s("br"),l(" → 背景更干净、对比更强，但会丢掉一些弱细节")])]),s("p",null,"一般经验："),s("ul",null,[s("li",null,[s("strong",null,"-60 ~ 0"),l("：更突出主要结构（适合论文图、清晰）")]),s("li",null,[s("strong",null,"-80 ~ 0"),l("：更全面（能看到更多弱能量）")]),s("li",null,[s("strong",null,"-100 ~ 0"),l("：适合看非常弱的背景，但容易显得“雾蒙蒙”")])])],-1),s("p",null,[s("strong",null,[s("code",null,'plt.colorbar(format="%+2.0f dB")'),l(" :")]),s("br"),l(" 加一个颜色条，并用 dB 的格式显示刻度（比如 -80、-60、-40、-20、0）。")],-1),s("p",null,[s("strong",null,[s("code",null,"plt.tight_layout()")]),s("br"),l(" 自动调整边距，避免标题/坐标轴/色条挤在一起或被裁掉。")],-1),s("p",null,[s("strong",null,[s("code",null,"plt.savefig(str(FIG_CLEAN), dpi=200)")]),s("br"),l(" 把当前这张图保存成文件：")],-1),s("p",null,[s("code",null,"FIG_CLEAN"),l(" 是输出路径（比如 spec_clean.png）")],-1),s("p",null,[s("code",null,"dpi=200"),l(" 表示清晰度（论文一般 200–300 都可以）")],-1),s("p",null,[s("strong",null,[s("code",null,"plt.close()")]),s("br"),l(" 关闭这张图，释放内存（脚本批量画图时很重要，否则会越占越多内存）。")],-1),s("p",null,null,-1)])]),_:1}),a[15]||(a[15]=p(`<p>完整代码：</p><p>调整了 vmin 到 -60</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> pathlib </span><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> Path</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> numpy </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> np</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> librosa</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> librosa.display</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> soundfile </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> sf</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> matplotlib.pyplot </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> plt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ===== 路径设置 =====</span></span>
<span class="line"><span style="color:#AE81FF;">ROOT</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> Path(__file__).resolve().parent</span></span>
<span class="line"><span style="color:#AE81FF;">IN_WAV</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> ROOT</span><span style="color:#F92672;"> /</span><span style="color:#E6DB74;"> &quot;clean.wav&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AE81FF;">NOISY_WAV</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> ROOT</span><span style="color:#F92672;"> /</span><span style="color:#E6DB74;"> &quot;noisy.wav&quot;</span></span>
<span class="line"><span style="color:#AE81FF;">FIG_CLEAN</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> ROOT</span><span style="color:#F92672;"> /</span><span style="color:#E6DB74;"> &quot;spec_clean.png&quot;</span></span>
<span class="line"><span style="color:#AE81FF;">FIG_NOISY</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> ROOT</span><span style="color:#F92672;"> /</span><span style="color:#E6DB74;"> &quot;spec_noisy.png&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F92672;"> not</span><span style="color:#AE81FF;"> IN_WAV</span><span style="color:#F8F8F2;">.exists():</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> FileNotFoundError</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;找不到：</span><span style="color:#AE81FF;">{IN_WAV}</span><span style="color:#E6DB74;">（cwd=</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">Path.cwd()</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">）&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ===== Step A：读取 clean，并统一采样率 =====</span></span>
<span class="line"><span style="color:#AE81FF;">SR</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 16000</span></span>
<span class="line"><span style="color:#F8F8F2;">y, sr </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> librosa.load(</span><span style="color:#66D9EF;font-style:italic;">str</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">IN_WAV</span><span style="color:#F8F8F2;">), </span><span style="color:#FD971F;font-style:italic;">sr</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">SR</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">mono</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">True</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Loaded:&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">IN_WAV</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&quot;len:&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(y), </span><span style="color:#E6DB74;">&quot;sr:&quot;</span><span style="color:#F8F8F2;">, sr)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ===== Step B：按目标 SNR 加白噪声 =====</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> add_white_noise_to_snr</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">clean</span><span style="color:#F8F8F2;">: np.ndarray, </span><span style="color:#FD971F;font-style:italic;">snr_db</span><span style="color:#F8F8F2;">: </span><span style="color:#66D9EF;font-style:italic;">float</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">seed</span><span style="color:#F8F8F2;">: </span><span style="color:#66D9EF;font-style:italic;">int</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    rng </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> np.random.default_rng(seed)</span></span>
<span class="line"><span style="color:#F8F8F2;">    noise </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> rng.standard_normal(</span><span style="color:#FD971F;font-style:italic;">size</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">clean.shape)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    p_sig </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> np.mean(clean</span><span style="color:#F92672;">**</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1e-12</span></span>
<span class="line"><span style="color:#F8F8F2;">    p_noise </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> np.mean(noise</span><span style="color:#F92672;">**</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1e-12</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    scale </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> np.sqrt(p_sig </span><span style="color:#F92672;">/</span><span style="color:#F8F8F2;"> (p_noise </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> (</span><span style="color:#AE81FF;">10</span><span style="color:#F92672;"> **</span><span style="color:#F8F8F2;"> (snr_db </span><span style="color:#F92672;">/</span><span style="color:#AE81FF;"> 10</span><span style="color:#F8F8F2;">))))</span></span>
<span class="line"><span style="color:#F8F8F2;">    noisy </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> clean </span><span style="color:#F92672;">+</span><span style="color:#F8F8F2;"> noise </span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;"> scale</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">    # 防削波：超过[-1,1]就整体缩放</span></span>
<span class="line"><span style="color:#F8F8F2;">    peak </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> np.max(np.abs(noisy))</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> peak </span><span style="color:#F92672;">&gt;</span><span style="color:#AE81FF;"> 0.99</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        noisy </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> noisy </span><span style="color:#F92672;">/</span><span style="color:#F8F8F2;"> peak </span><span style="color:#F92672;">*</span><span style="color:#AE81FF;"> 0.99</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> noisy.astype(np.float32)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AE81FF;">TARGET_SNR_DB</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 5.0</span><span style="color:#88846F;">  # 0更吵，10更干净</span></span>
<span class="line"><span style="color:#F8F8F2;">noisy </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> add_white_noise_to_snr(y, </span><span style="color:#AE81FF;">TARGET_SNR_DB</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">seed</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">sf.write(</span><span style="color:#66D9EF;font-style:italic;">str</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">NOISY_WAV</span><span style="color:#F8F8F2;">), noisy, </span><span style="color:#AE81FF;">SR</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Saved:&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">NOISY_WAV</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ===== Step C：STFT -&gt; dB（两张图统一参考，保证可比）=====</span></span>
<span class="line"><span style="color:#AE81FF;">WINDOW</span><span style="color:#F92672;"> =</span><span style="color:#E6DB74;"> &quot;hann&quot;</span></span>
<span class="line"><span style="color:#AE81FF;">WIN_LENGTH</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 400</span><span style="color:#88846F;">   # 25ms @ 16k</span></span>
<span class="line"><span style="color:#AE81FF;">HOP_LENGTH</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 160</span><span style="color:#88846F;">   # 10ms @ 16k</span></span>
<span class="line"><span style="color:#AE81FF;">N_FFT</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 512</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> stft_mag</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">x</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    D </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> librosa.stft(x, </span><span style="color:#FD971F;font-style:italic;">n_fft</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">N_FFT</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">hop_length</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">HOP_LENGTH</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#FD971F;font-style:italic;">                     win_length</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">WIN_LENGTH</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">window</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">WINDOW</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> np.abs(D)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">S_clean </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> stft_mag(y)</span></span>
<span class="line"><span style="color:#F8F8F2;">S_noisy </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> stft_mag(noisy)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 关键：两张图用同一个 ref（用 clean 的最大值）</span></span>
<span class="line"><span style="color:#F8F8F2;">ref </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> np.percentile(S_clean, </span><span style="color:#AE81FF;">99.9</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1e-12</span></span>
<span class="line"><span style="color:#F8F8F2;">S_clean_db </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> librosa.amplitude_to_db(S_clean, </span><span style="color:#FD971F;font-style:italic;">ref</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">ref)</span></span>
<span class="line"><span style="color:#F8F8F2;">S_noisy_db </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> librosa.amplitude_to_db(S_noisy, </span><span style="color:#FD971F;font-style:italic;">ref</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">ref)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AE81FF;">VMIN</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">VMAX</span><span style="color:#F92672;"> =</span><span style="color:#F92672;"> -</span><span style="color:#AE81FF;">60</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">plt.figure()       </span><span style="color:#88846F;"># 新建一张空画布（一个 figure）</span></span>
<span class="line"><span style="color:#F8F8F2;">librosa.display.specshow(S_clean_db, </span><span style="color:#FD971F;font-style:italic;">sr</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">SR</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">hop_length</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">HOP_LENGTH</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#FD971F;font-style:italic;">                         x_axis</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&quot;time&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">y_axis</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&quot;linear&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">vmin</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">VMIN</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">vmax</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">VMAX</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.colorbar(</span><span style="color:#FD971F;font-style:italic;">format</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">%+2.0f</span><span style="color:#E6DB74;"> dB&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.title(</span><span style="color:#E6DB74;">&quot;CLEAN Spectrogram&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.tight_layout()</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.savefig(</span><span style="color:#66D9EF;font-style:italic;">str</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">FIG_CLEAN</span><span style="color:#F8F8F2;">), </span><span style="color:#FD971F;font-style:italic;">dpi</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">200</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.close()</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Saved:&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">FIG_CLEAN</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">plt.figure()</span></span>
<span class="line"><span style="color:#F8F8F2;">librosa.display.specshow(S_noisy_db, </span><span style="color:#FD971F;font-style:italic;">sr</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">SR</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">hop_length</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">HOP_LENGTH</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#FD971F;font-style:italic;">                         x_axis</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&quot;time&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">y_axis</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&quot;linear&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">vmin</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">VMIN</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">vmax</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">VMAX</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.colorbar(</span><span style="color:#FD971F;font-style:italic;">format</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&quot;</span><span style="color:#AE81FF;">%+2.0f</span><span style="color:#E6DB74;"> dB&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.title(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;NOISY Spectrogram (SNR=</span><span style="color:#AE81FF;">{TARGET_SNR_DB}</span><span style="color:#E6DB74;"> dB)&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.tight_layout()</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.savefig(</span><span style="color:#66D9EF;font-style:italic;">str</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">FIG_NOISY</span><span style="color:#F8F8F2;">), </span><span style="color:#FD971F;font-style:italic;">dpi</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">200</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">plt.close()</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Saved:&quot;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">FIG_NOISY</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><figure><img src="`+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',4))])}const f=m(y,[["render",d]]),x=JSON.parse('{"path":"/programming/learn-SSP-with-GPT/02-spectrum.html","title":"02. 语音信号处理 Pycharm 实操——谱图","lang":"zh-CN","frontmatter":{"title":"02. 语音信号处理 Pycharm 实操——谱图","icon":"boke","date":"2025-12-24T21:52:29.000Z","author":"Ran","isOriginal":true,"sticky":false,"star":false,"article":true,"timeline":true,"image":false,"navbar":true,"sidebarIcon":true,"comment":true,"lastUpdated":true,"editLink":true,"backToTop":true,"toc":true,"description":"1. 目标 用 scipy.signal.stft 或 librosa.stft 画谱图（干净/带噪各一张） 2. 准备干净语料 准备干净的语音文件 clean.wav 放在合适的文件夹中。 3. 生成噪声语料并画出谱图 安装前一天没有安装，今天又需要的包：librosa 。 终端输入命令 pip install librosa 。 分析 GPT 给出...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"02. 语音信号处理 Pycharm 实操——谱图\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-12-24T21:52:29.000Z\\",\\"dateModified\\":\\"2025-12-25T16:44:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Ran\\"}]}"],["meta",{"property":"og:url","content":"https://pythiaroot.com/programming/learn-SSP-with-GPT/02-spectrum.html"}],["meta",{"property":"og:site_name","content":"Pythia’s Root"}],["meta",{"property":"og:title","content":"02. 语音信号处理 Pycharm 实操——谱图"}],["meta",{"property":"og:description","content":"1. 目标 用 scipy.signal.stft 或 librosa.stft 画谱图（干净/带噪各一张） 2. 准备干净语料 准备干净的语音文件 clean.wav 放在合适的文件夹中。 3. 生成噪声语料并画出谱图 安装前一天没有安装，今天又需要的包：librosa 。 终端输入命令 pip install librosa 。 分析 GPT 给出..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-25T16:44:20.000Z"}],["meta",{"property":"article:author","content":"Ran"}],["meta",{"property":"article:published_time","content":"2025-12-24T21:52:29.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-25T16:44:20.000Z"}]]},"git":{"createdTime":1766591070000,"updatedTime":1766681060000,"contributors":[{"name":"AmaraMeng","username":"AmaraMeng","email":"ranmeng9558@gmail.com","commits":2,"url":"https://github.com/AmaraMeng"}],"changelog":[{"hash":"1145ef7e6d09c27037ce6b04f401186e351db64e","time":1766681060000,"email":"ranmeng9558@gmail.com","author":"AmaraMeng","message":"Refactor code structure for improved readability and maintainability"},{"hash":"6e643fb7d8faac25c900b58807d6e277fc14ad3e","time":1766591070000,"email":"ranmeng9558@gmail.com","author":"AmaraMeng","message":"feat: Add comprehensive tutorial on speech signal processing with spectrogram generation"}]},"readingTime":{"minutes":16.79,"words":5037},"filePathRelative":"programming/learn-SSP-with-GPT/02-spectrum.md","excerpt":"<h2>1. 目标</h2>\\n<p>用 <code>scipy.signal.stft</code> 或 <code>librosa.stft</code> 画谱图（干净/带噪各一张）</p>\\n<h2>2. 准备干净语料</h2>\\n<p>准备干净的语音文件 <code>clean.wav</code> 放在合适的文件夹中。</p>\\n<figure><figcaption></figcaption></figure>\\n<h3>3. 生成噪声语料并画出谱图</h3>\\n<p>安装前一天没有安装，今天又需要的包：<code>librosa</code> 。</p>\\n<p>终端输入命令 <code>pip install librosa</code> 。</p>","autoDesc":true}');export{f as comp,x as data};
