<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.95" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"16. Python 3 的错误与异常","image":[""],"datePublished":"2025-11-03T14:53:52.000Z","dateModified":"2025-11-06T08:10:15.000Z","author":[{"@type":"Person","name":"Ran"}]}</script><meta property="og:url" content="https://pythiaroot.com/programming/python/16-python3-errors-and-exceptions.html"><meta property="og:site_name" content="Pythia’s Root"><meta property="og:title" content="16. Python 3 的错误与异常"><meta property="og:description" content="在链接大模型的时候，我们需要了 try … except ，这一部分进行详细讲解。 1. 区分语法错误和异常 1.1 语法错误 Python 的语法错误称之为解析错，是初学者经常碰到的，如下实例： 这个例子中，print() 函数检查有错误，前面缺少了一个冒号 : 。 语法分析器指出了出错的一行，并且在最先找到错误的地方标记了一个小箭头 ^ 。 1.2..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-11-06T08:10:15.000Z"><meta property="article:author" content="Ran"><meta property="article:published_time" content="2025-11-03T14:53:52.000Z"><meta property="article:modified_time" content="2025-11-06T08:10:15.000Z"><link rel="icon" href="/logo.jpg"><title>16. Python 3 的错误与异常 | Pythia’s Root</title><meta name="description" content="在链接大模型的时候，我们需要了 try … except ，这一部分进行详细讲解。 1. 区分语法错误和异常 1.1 语法错误 Python 的语法错误称之为解析错，是初学者经常碰到的，如下实例： 这个例子中，print() 函数检查有错误，前面缺少了一个冒号 : 。 语法分析器指出了出错的一行，并且在最先找到错误的地方标记了一个小箭头 ^ 。 1.2...">
    <link rel="preload" href="/assets/style-fescsFu7.css" as="style"><link rel="stylesheet" href="/assets/style-fescsFu7.css">
    <link rel="modulepreload" href="/assets/app-CbaWUCSL.js"><link rel="modulepreload" href="/assets/16-python3-errors-and-exceptions.html-BY6bJgT9.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-DC9Gftar.js" as="script"><link rel="prefetch" href="/assets/intro.html-CHvkO1R7.js" as="script"><link rel="prefetch" href="/assets/Cao-jing-JYM.html-Df16dQDx.js" as="script"><link rel="prefetch" href="/assets/01-Ch1.html-bgrBYo-P.js" as="script"><link rel="prefetch" href="/assets/01-basic-math-knowledge.html-XvmP3VJM.js" as="script"><link rel="prefetch" href="/assets/00-python-tips.html-BgDpGpw6.js" as="script"><link rel="prefetch" href="/assets/01-variable.html-rxwc7oR5.js" as="script"><link rel="prefetch" href="/assets/02-data-type.html-pyWicWiG.js" as="script"><link rel="prefetch" href="/assets/02-test-variable-datatype.html-DExryLrC.js" as="script"><link rel="prefetch" href="/assets/03-numeric-type.html-DCTRLSNf.js" as="script"><link rel="prefetch" href="/assets/04-string.html-CqEXapQI.js" as="script"><link rel="prefetch" href="/assets/05-list.html-CEVwIvIS.js" as="script"><link rel="prefetch" href="/assets/06-tuple.html-DFyZ9fZ1.js" as="script"><link rel="prefetch" href="/assets/07-dict.html-Doqp8pNE.js" as="script"><link rel="prefetch" href="/assets/08-set.html-CHZZOAI2.js" as="script"><link rel="prefetch" href="/assets/09-bool.html-CyppbscE.js" as="script"><link rel="prefetch" href="/assets/10-if.html-DlAzGeSP.js" as="script"><link rel="prefetch" href="/assets/11-while.html-CrAFEmWJ.js" as="script"><link rel="prefetch" href="/assets/12-for.html-QjGk4uxr.js" as="script"><link rel="prefetch" href="/assets/13-functions.html-C1rQfxhD.js" as="script"><link rel="prefetch" href="/assets/14-class.html-BNWKMJEj.js" as="script"><link rel="prefetch" href="/assets/15-environment.html-Bg1-9b9H.js" as="script"><link rel="prefetch" href="/assets/17-TBSgame.html-zF05lM4X.js" as="script"><link rel="prefetch" href="/assets/18-deepseek-api.html-DPsI0dhv.js" as="script"><link rel="prefetch" href="/assets/19-local-LLM.html-C6n6wPXv.js" as="script"><link rel="prefetch" href="/assets/20-anaconda-install.html-DK9cW8tm.js" as="script"><link rel="prefetch" href="/assets/21-python-install.html-Dz69hQtJ.js" as="script"><link rel="prefetch" href="/assets/22-files-opt.html-C7G1ie8e.js" as="script"><link rel="prefetch" href="/assets/Markdown-formula.html-9HfPW55L.js" as="script"><link rel="prefetch" href="/assets/Static-website-building.html-nRss9ml1.js" as="script"><link rel="prefetch" href="/assets/article-typora.html-mFk1QlYW.js" as="script"><link rel="prefetch" href="/assets/01-LOVEintheTIMEofCHOLERA.html-DvavGV8C.js" as="script"><link rel="prefetch" href="/assets/02-Tuesdays-with-Morrie.html-BSY2rHoX.js" as="script"><link rel="prefetch" href="/assets/01-EEG-based-detection-of-the-locus-of-auditory-attention-with-convolutional-neural-networks.html-D5tUzUYX.js" as="script"><link rel="prefetch" href="/assets/02-Impact-of-auditory-attention-decoding-accuracy-on-noise-reduction-systems-for-hearing-aids.html-B6FKvn8m.js" as="script"><link rel="prefetch" href="/assets/01-human-DK10000.html-Bn7TNiVB.js" as="script"><link rel="prefetch" href="/assets/404.html-DWO93BR8.js" as="script"><link rel="prefetch" href="/assets/index.html-BZC-DE4Z.js" as="script"><link rel="prefetch" href="/assets/index.html-bDC7YzCJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ1nQ3Kr.js" as="script"><link rel="prefetch" href="/assets/index.html-CmI30_CY.js" as="script"><link rel="prefetch" href="/assets/index.html-Wfi6sU4d.js" as="script"><link rel="prefetch" href="/assets/index.html-D5htKB_j.js" as="script"><link rel="prefetch" href="/assets/index.html-B74mNeMh.js" as="script"><link rel="prefetch" href="/assets/index.html-CiGwqNyQ.js" as="script"><link rel="prefetch" href="/assets/index.html-BiVd2mJF.js" as="script"><link rel="prefetch" href="/assets/index.html-BjXFhYJG.js" as="script"><link rel="prefetch" href="/assets/index.html-CCWFqFrJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CA1_UbjF.js" as="script"><link rel="prefetch" href="/assets/index.html-6MVjJcaL.js" as="script"><link rel="prefetch" href="/assets/index.html-Buw3w8en.js" as="script"><link rel="prefetch" href="/assets/index.html-CL_BKYoC.js" as="script"><link rel="prefetch" href="/assets/index.html-BX9C-xNC.js" as="script"><link rel="prefetch" href="/assets/index.html-fx7_y-zo.js" as="script"><link rel="prefetch" href="/assets/index.html-CReS80Hf.js" as="script"><link rel="prefetch" href="/assets/index.html-B-3el3k0.js" as="script"><link rel="prefetch" href="/assets/index.html-BIZXYfqK.js" as="script"><link rel="prefetch" href="/assets/index.html-RFtE9N-z.js" as="script"><link rel="prefetch" href="/assets/index.html-DVHG7MVX.js" as="script"><link rel="prefetch" href="/assets/index.html-CY-uR9L_.js" as="script"><link rel="prefetch" href="/assets/index.html-CMS9nJZl.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-8zsV0Fdx.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CKV1Bsxh.js" as="script"><link rel="prefetch" href="/assets/waline-meta-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/component-CZ1lh15l.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/阿尔法 logo.jpg" alt><!----><span class="vp-site-name hide-in-pad">Pythia’s Root</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Pythia’s Root"><!--[--><i class="vp-icon iconfont icon-house" sizing="height"></i><!--]-->Pythia’s Root<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="编程"><!--[--><i class="vp-icon iconfont icon-biancheng-01" sizing="height"></i>编程<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/static-website-blog/" aria-label="Static website building-blog"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->Static website building-blog<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/programming/python/" aria-label="Python"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->Python<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/ThinkDSP/" aria-label="ThinkDSP"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->ThinkDSP<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/programming/math-for-ai/" aria-label="Math for AI"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->Math for AI<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/#" aria-label="人工耳蜗"><!--[--><i class="vp-icon iconfont icon-rengongerwoshenqing" sizing="height"></i><!--]-->人工耳蜗<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/#" aria-label="语音学"><!--[--><i class="vp-icon iconfont icon-shengboyuyinxiaoxi" sizing="height"></i><!--]-->语音学<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="翻译"><!--[--><i class="vp-icon iconfont icon-fanyi" sizing="height"></i>翻译<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/translation/vocabulary/" aria-label="词汇"><!--[--><i class="vp-icon iconfont icon-cihuiben" sizing="both"></i><!--]-->词汇<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/translation/peki/" aria-label="Peki"><!--[--><i class="vp-icon iconfont icon-fanyi" sizing="both"></i><!--]-->Peki<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/sports/" aria-label="运动"><!--[--><i class="vp-icon iconfont icon-jianshenfang" sizing="height"></i><!--]-->运动<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="阅读"><!--[--><i class="vp-icon iconfont icon-yuedu" sizing="height"></i>阅读<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/reading/literature/" aria-label="文献"><!--[--><i class="vp-icon iconfont icon-yuedu" sizing="both"></i><!--]-->文献<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/reading/books/" aria-label="书籍"><!--[--><i class="vp-icon iconfont icon-yuedu" sizing="both"></i><!--]-->书籍<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/AmaraMeng/AmaraMeng.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="Pythia’s Root"><!--[--><i class="vp-icon iconfont icon-house" sizing="both"></i><!--]-->Pythia’s Root<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Programming</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Math for Ai</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Python</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/00-python-tips.html" aria-label="00. Python 使用技巧"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->00. Python 使用技巧<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/01-variable.html" aria-label="01. 变量和 print"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->01. 变量和 print<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/02-data-type.html" aria-label="02. 初识数据类型"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->02. 初识数据类型<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/02-test-variable-datatype.html" aria-label="02. 阶段测试-变量和数据类型"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->02. 阶段测试-变量和数据类型<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/03-numeric-type.html" aria-label="03. 数字型"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->03. 数字型<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/04-string.html" aria-label="04. 字符串和 input"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->04. 字符串和 input<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/05-list.html" aria-label="05. 列表"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->05. 列表<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/06-tuple.html" aria-label="06. 元组"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->06. 元组<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/07-dict.html" aria-label="07. 字典"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->07. 字典<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/08-set.html" aria-label="08. 集合"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->08. 集合<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/09-bool.html" aria-label="09. 布尔表达式"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->09. 布尔表达式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/10-if.html" aria-label="10. if"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->10. if<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/11-while.html" aria-label="11. while"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->11. while<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/12-for.html" aria-label="12. for"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->12. for<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/13-functions.html" aria-label="13. 函数"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->13. 函数<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/14-class.html" aria-label="14. 类"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->14. 类<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/15-environment.html" aria-label="15. 虚拟环境和 Jupyter Notebook 的使用"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->15. 虚拟环境和 Jupyter Notebook 的使用<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/programming/python/16-python3-errors-and-exceptions.html" aria-label="16. Python 3 的错误与异常"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->16. Python 3 的错误与异常<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/17-TBSgame.html" aria-label="17. 回合制打怪游戏设计（文字版）"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->17. 回合制打怪游戏设计（文字版）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/18-deepseek-api.html" aria-label="18. Deepseek API 接入对战"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->18. Deepseek API 接入对战<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/19-local-LLM.html" aria-label="19. 本地大模型对接（Ollama、LM Studio）"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->19. 本地大模型对接（Ollama、LM Studio）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/20-anaconda-install.html" aria-label="20. Anaconda 安装及路径设置"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->20. Anaconda 安装及路径设置<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/21-python-install.html" aria-label="21. Python 及 Pycharm 的安装及环境配置"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->21. Python 及 Pycharm 的安装及环境配置<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/programming/python/22-files-opt.html" aria-label="22. 文件读取"><!--[--><i class="vp-icon iconfont icon-boke" sizing="both"></i><!--]-->22. 文件读取<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Static Website Blog</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Think DSP</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Reading</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Sports</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Translation</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="介绍页"><!--[--><i class="vp-icon iconfont icon-circle-info" sizing="both"></i><!--]-->介绍页<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-boke" sizing="height"></i>16. Python 3 的错误与异常</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Ran</span></span><span property="author" content="Ran"></span></span><span class="page-original-info">原创</span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025/11/3</span><meta property="datePublished" content="2025-11-03T14:53:52.000Z"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/programming/python/16-python3-errors-and-exceptions.html" data-page-key="/programming/python/16-python3-errors-and-exceptions.html">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 18 分钟</span><meta property="timeRequired" content="PT18M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><p>在链接大模型的时候，我们需要了 <code>try … except</code> ，这一部分进行详细讲解。</p><h2 id="_1-区分语法错误和异常" tabindex="-1"><a class="header-anchor" href="#_1-区分语法错误和异常"><span>1. 区分语法错误和异常</span></a></h2><h3 id="_1-1-语法错误" tabindex="-1"><a class="header-anchor" href="#_1-1-语法错误"><span>1.1 语法错误</span></a></h3><p>Python 的语法错误称之为解析错，是初学者经常碰到的，如下实例：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#F92672;"> while</span><span style="color:#AE81FF;"> True</span><span style="color:#66D9EF;"> print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Hello world&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">#------ output ------</span></span>
<span class="line"><span style="color:#F8F8F2;">File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est5.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F92672;">    while</span><span style="color:#AE81FF;"> True</span><span style="color:#66D9EF;"> print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Hello world&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">               ^</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">SyntaxError</span><span style="color:#F8F8F2;">: invalid syntax</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个例子中，<code>print()</code> 函数检查有错误，前面缺少了一个冒号 <code>:</code> 。</p><p>语法分析器指出了出错的一行，并且在最先找到错误的地方标记了一个小箭头 <code>^</code> 。</p><h3 id="_1-2-异常" tabindex="-1"><a class="header-anchor" href="#_1-2-异常"><span>1.2 异常</span></a></h3><p>即使 Python 程序的语法是正确的，在运行时也可能发生错误。运行期间检测到的错误被称为异常。</p><p>大多数异常都不会被程序处理，都以错误信息的形式展现在这里：</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#AE81FF;"> 10</span><span style="color:#F92672;"> *</span><span style="color:#F8F8F2;"> (</span><span style="color:#AE81FF;">1</span><span style="color:#F92672;">/</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">)    </span><span style="color:#88846F;"># 0 不能作为除数，报异常</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est5.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#AE81FF;">    10</span><span style="color:#F92672;"> *</span><span style="color:#F8F8F2;"> (</span><span style="color:#AE81FF;">1</span><span style="color:#F92672;">/</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">ZeroDivisionError</span><span style="color:#F8F8F2;">: division by zero</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#AE81FF;"> 4</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> spam</span><span style="color:#F92672;">*</span><span style="color:#AE81FF;">3</span><span style="color:#88846F;">    # spam 未定义，触发异常</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est5.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#AE81FF;">    4</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> spam</span><span style="color:#F92672;">*</span><span style="color:#AE81FF;">3</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">: name </span><span style="color:#E6DB74;">&#39;spam&#39;</span><span style="color:#F92672;"> is</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> defined</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> +</span><span style="color:#E6DB74;"> &#39;2&#39;</span><span style="color:#88846F;">      # int 不能与 str 相加，触发异常</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est5.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#AE81FF;">    2</span><span style="color:#F92672;"> +</span><span style="color:#E6DB74;"> &#39;2&#39;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">TypeError</span><span style="color:#F8F8F2;">: unsupported operand </span><span style="color:#66D9EF;font-style:italic;">type</span><span style="color:#F8F8F2;">(s) </span><span style="color:#F92672;">for</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">&#39;int&#39;</span><span style="color:#F92672;"> and</span><span style="color:#E6DB74;"> &#39;str&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><blockquote><p>上述代码是为了演示异常情况，故意写的语法正确但是运行会报错的例子。实际开发过程中，有时会忽略某种特殊情况，当用户输入超出了我们开发时预测的情况，程序会报错。</p></blockquote><p>异常以不同的类型出现，这些类型都作为输出信息的一部分显示出来：例子中的异常类型有：ZeroDivisionError， NameError， TypeError 。</p><blockquote><p>错误类型不需要记忆，只要在报错时查看报错类型，接着用 try/except 进行匹配处理即可！</p></blockquote><p>错误信息的前面部分展示了发生异常的上下文，并以调用栈的形式显示具体信息。</p><h2 id="_2-异常处理" tabindex="-1"><a class="header-anchor" href="#_2-异常处理"><span>2. 异常处理</span></a></h2><p>异常捕捉可以用 try/except 语句。</p><figure><img src="/assets/image-20251030145934938-C6JjAGuo.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以下例子中，让用户输入一个合法的整数，但是允许用户中断这个程序（使用 <code>ctrl + c</code> 或者操作系统提供的方法）。用户中断的信息会引发一个 Keyboardinterrupt 异常。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        x </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;请输入一个数字：&quot;</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"><span style="color:#F92672;">        break</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> KeyboardInterrupt</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;您输入的不是数字，请再次尝试输入！&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述代码，右键 <code>打开于</code> - <code>终端</code> 。在终端内运行，结果如下：</p><figure><img src="/assets/image-20251030151046544-CP78ZC9s.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>我们按 <code>Ctrl + c</code>无法退出程序，只会触发 <code>KeyboardInterrupt</code> ，因此只能关闭终端解决。</p><p><code>int()</code> 将字符串强制转换为数字型，什么时候会报错？ ——非纯数字就会触发报错！</p><p>在不使用 try/except 的时候如何避免此类报错？</p><h3 id="_2-1-原始方法" tabindex="-1"><a class="header-anchor" href="#_2-1-原始方法"><span>2.1 原始方法</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        x </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;请输入一个数字：&quot;</span><span style="color:#F8F8F2;">).strip()</span></span>
<span class="line"><span style="color:#F92672;">        if</span><span style="color:#F8F8F2;"> x.isdigit():</span></span>
<span class="line"><span style="color:#F8F8F2;">            x </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(x)</span></span>
<span class="line"><span style="color:#F92672;">            break</span></span>
<span class="line"><span style="color:#F92672;">        else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">            print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;您输入的不是数字，请再次尝试输入！&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>像上面这样的代码，本质上需要考察：预判+避免，也就是把有可能的错误进行预判，预判之后进行规避。</p><blockquote><p>预判：我们预判用户输入的有可能不是纯数字；</p><p>避免：使用 if 来判断是否是纯数字的情况；</p><p>缺点：总有意想不到、百密一疏，造成报错。（总有考虑不到的情况）</p></blockquote><h3 id="_2-2-try-except-方法" tabindex="-1"><a class="header-anchor" href="#_2-2-try-except-方法"><span>2.2 try/except 方法</span></a></h3><p>except 需要匹配报错类型，如何获取呢？ —— 直接写一个代码，故意让其报错，就可以从输出的报错获得报错类型：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#66D9EF;font-style:italic;">int</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;1a&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">ValueError</span><span style="color:#F8F8F2;">: invalid literal </span><span style="color:#F92672;">for</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">with</span><span style="color:#F8F8F2;"> base </span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">&#39;1a&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>得到 <code>ValueError</code> 的错误类型后，即可用 try/except 实现：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        x </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;">input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;请输入一个数字：&quot;</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"><span style="color:#F92672;">        break</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> ValueError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">            print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;您输入的不是数字，请再次尝试输入！&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">小贴士</p><ul><li><strong>接纳与控制</strong>：try/except 可以接受程序出现报错，并对匹配到的报错进行特定操作；</li><li><strong>全面</strong>：也可以实现无论什么报错，都可以匹配控制，防止没有预料到的错误导致程序停止。</li></ul></div><h3 id="_2-3-try-except-多个错误匹配" tabindex="-1"><a class="header-anchor" href="#_2-3-try-except-多个错误匹配"><span>2.3 try/except 多个错误匹配</span></a></h3><p>一个 <code>try</code> 语句可能包含多个 <code>except</code> 子句，分别来处理不同的异常，并且最多一个子句会被执行。</p><p>处理程序将只针对对应的 <code>try</code> 块中的异常进行处理，而不是处理其他的 <code>try</code> 块中的异常。</p><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>在 Python 中，每一个 try 语句都与其后面的 except 子句形成一个<strong>独立的异常处理结构</strong>。</p><p>当程序在某个 try 块中运行出现异常时，Python 会仅在这个 try 对应的 except 子句中查找匹配的异常类型，并执行相应的处理逻辑。</p><p>如果该异常在当前 try 的所有 except 子句中都没有被捕获处理，它就会继续向外层传播（也就是“冒泡”），由外层的 try...except 块尝试进行处理。</p><p>而不会跳过当前层级，直接被其他并列或不相关的 <code>try...except</code> 块捕获。</p><p>因此，<strong>每个 except 只负责处理它所属的 try 块中的异常，不会处理来自其他 try 块的错误。</strong></p></div><h4 id="_2-3-1-使用元组捕获多个异常" tabindex="-1"><a class="header-anchor" href="#_2-3-1-使用元组捕获多个异常"><span>2.3.1 使用元组捕获多个异常</span></a></h4><p>一个 except 子句可以同时处理多个异常，这些异常将被放在一个括号里形成一个元组，例如：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">RuntimeError</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TypeError</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F92672;">    pass</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>我们来看一个实际的代码示例：</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;程序开始运行&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    # 下面的代码会触发 NameError</span></span>
<span class="line"><span style="color:#F8F8F2;">    result </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> x </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 5</span><span style="color:#88846F;">    # x 未定义</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">RuntimeError</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">TypeError</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#88846F;">    # 捕获三种异常之一</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕获到错误，但是程序继续执行。&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;程序继续执行。&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">#------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">程序开始运行</span></span>
<span class="line"><span style="color:#F8F8F2;">捕获到错误，但是程序继续执行。</span></span>
<span class="line"><span style="color:#F8F8F2;">程序继续执行。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>这种写法主要取决于想要把多种错误汇总到一起并统一处理，不将每种错误进行特殊处理。若需要每种错误分开处理，则需要拆开代码编写。</p><h4 id="_2-3-2-多个-except-捕获异常" tabindex="-1"><a class="header-anchor" href="#_2-3-2-多个-except-捕获异常"><span>2.3.2 多个 except 捕获异常</span></a></h4><p>接下来尝试拆开编写：</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;程序开始运行&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    result </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> x </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 5</span><span style="color:#88846F;">      # x 未定义，会触发 NameError</span></span>
<span class="line"><span style="color:#88846F;">    # result = 10/0     # 会触发 ZeroDivisionError</span></span>
<span class="line"><span style="color:#88846F;">    # result = &#39;a&#39; + 1  # 会触发 TypeError</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(result)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> RuntimeError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕获到 RuntimeError：运行时错误。&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> TypeError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕获到 TypeError：类型错误&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> NameError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕捉到 NameError：变量未定义&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;程序继续执行。&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">#------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">程序开始运行</span></span>
<span class="line"><span style="color:#F8F8F2;">捕捉到 </span><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">：变量未定义</span></span>
<span class="line"><span style="color:#F8F8F2;">程序继续执行。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>最后一个 except 子句可以忽略异常的名称，它被当做通配符使用。你可以使用这种方法打印一个错误信息，然后再次把异常抛出。</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;程序开始运行&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    result </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> x </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 5</span><span style="color:#88846F;">       # x 未定义，会触发 NameError</span></span>
<span class="line"><span style="color:#88846F;">    # result = &#39;a&#39; + 1   # 会触发 TypeError</span></span>
<span class="line"><span style="color:#88846F;">    # raise RuntimeError # 手动触发 RuntimeError</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> RuntimeError</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> err:     </span><span style="color:#88846F;"># err 是变量名，可以自行随意设置</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕获到 RuntimeError：&quot;</span><span style="color:#F8F8F2;">, err)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> TypeError</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> err:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕获到 TypeError：类型错误，详情：&quot;</span><span style="color:#F8F8F2;">, err)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> NameError</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> err:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;捕捉到 NameError：变量未定义，详情：&quot;</span><span style="color:#F8F8F2;">, err)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    # 捕获所有未被上面 except 匹配的其他异常</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Unexpected error:&quot;</span><span style="color:#F8F8F2;">, sys.exc_info()[</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">])</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#88846F;">       # 重新抛出异常（不隐藏错误）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;程序继续执行。&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">#------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">程序开始运行</span></span>
<span class="line"><span style="color:#F8F8F2;">捕捉到 </span><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">：变量未定义，详情： name </span><span style="color:#E6DB74;">&#39;x&#39;</span><span style="color:#F92672;"> is</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> defined</span></span>
<span class="line"><span style="color:#F8F8F2;">程序继续执行。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><ul><li><code>import sys</code> 是为了调用 <code>sys.exc_info()</code> 获取当前异常类型。</li><li>每个 <code>except</code> 独立处理一种错误类型。</li><li>最后的 <code>except</code> 是兜底（相当于其他错误），建议只在确实需要时使用。</li><li><code>raise</code> 语句用于重新抛出异常，便于调试时追踪错误。</li></ul><h4 id="_2-3-3-对比总结表" tabindex="-1"><a class="header-anchor" href="#_2-3-3-对比总结表"><span>2.3.3 对比总结表</span></a></h4><table><thead><tr><th>特点</th><th>拆开写法</th><th>合并写法</th></tr></thead><tbody><tr><td>可读性</td><td>清晰、易区分</td><td>简洁、紧凑</td></tr><tr><td>可定制性</td><td>可对每种错误打印不同提示</td><td>所有错误同一处理逻辑</td></tr><tr><td>使用场景</td><td>需要区分不同错误时</td><td>错误处理逻辑相同或简单时</td></tr><tr><td>示例语法</td><td><code>except NameError:</code></td><td><code>except (NameError, TypeError):</code></td></tr></tbody></table><h3 id="_2-4-try-except-else" tabindex="-1"><a class="header-anchor" href="#_2-4-try-except-else"><span>2.4 try/except … else</span></a></h3><p><code>try/except</code> 语句还有一个可选的 <code>else</code> 子句，如果使用这个子句，那么必须放在所有的 <code>except</code> 子句之后。</p><p><code>else</code> 子句将在 <code>try</code> 子句没有发生任何异常的时候执行。</p><figure><img src="/assets/image-20251103150048013-D5I-xrXy.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container tip"><p class="hint-container-title">类似于一群人去探险找宝物。一个公子哥就让随身的手下先去探路，并很自大的跟其他队友说到：咱们先原地休整一下，前面探路没问题了以后再一同前往。</p><ul><li>try ：探路的手下，没死并且活着回来。</li><li>else：公子哥与其他队友，一起继续往前走。</li></ul></div><h4 id="_2-4-1-例子-打开文件并读取行数" tabindex="-1"><a class="header-anchor" href="#_2-4-1-例子-打开文件并读取行数"><span>2.4.1 例子：打开文件并读取行数</span></a></h4><p>以下实例在 try 语句中判断文件是否可以打开，如果打开文件时正常、没有发生任何异常的情况下，再执行 else 这一部分的语句，读取文件内容。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-0" aria-selected="true">file1.txt</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-1" aria-selected="false">file2.txt</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-2" aria-selected="false">Code</button></div><!--[--><div class="vp-code-tab active" id="v-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">file1.txt</div><!--[--><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-text"><span class="line"><span>Hello</span></span>
<span class="line"><span>World</span></span>
<span class="line"><span>Python</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">file2.txt</div><!--[--><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-text"><span class="line"><span>Ran</span></span>
<span class="line"><span>Pythiaroot.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Code</div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#E6DB74;">-sys.argv：是一个列表，包含运行 Python 脚本时的命令行参数。</span></span>
<span class="line"><span style="color:#E6DB74;">-sys.argv[0]：是脚本名。</span></span>
<span class="line"><span style="color:#E6DB74;">-sys.argv[1:]：是脚本名后面跟的文件名列表。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> arg </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> sys.argv[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">:]:</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        f </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> open</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> IOError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">        # 如果文件无法打开（例如文件不存在或者权限问题），捕获 IOError 异常</span></span>
<span class="line"><span style="color:#88846F;">        # 打印错误信息，告知无法打开哪个文件</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;can not open&#39;</span><span style="color:#F8F8F2;">, arg)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">        # 如果文件成功打开，执行 else 中的代码</span></span>
<span class="line"><span style="color:#88846F;">        # 使用 readlines() 方法读取文件的所有行，并计算其长度（即行数）</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;has&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(f.readlines()), </span><span style="color:#E6DB74;">&#39;lines&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">        # 读取完成后，关闭文件以释放资源</span></span>
<span class="line"><span style="color:#F8F8F2;">        f.close()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><details class="hint-container details"><summary>🧑‍💻 详细解释</summary><ol><li><p><strong><code>import sys</code></strong></p><p>这行代码导入 Python 的 <code>sys</code> 模块，它提供了与 Python 解释器紧密相关的功能，比如 <code>sys.argv</code> 用来获取命令行参数。</p></li><li><p><strong><code>for arg in sys.argv[1:]:</code></strong></p><p>这里的 <code>sys.argv</code> 是一个列表，包含了所有从命令行传入的参数。</p><ul><li><code>sys.argv[0]</code> 是当前脚本的名称，所以从 <code>sys.argv[1:]</code> 开始遍历，处理实际传入的文件名。</li></ul></li><li><p><strong><code>try:</code></strong></p><p><code>try</code> 块用于捕获可能引发异常的代码。如果在 <code>try</code> 块中发生异常，Python 会跳到相应的 <code>except</code> 块进行处理。</p></li><li><p><strong><code>f = open(arg, &#39;r&#39;)</code></strong></p><p>该行尝试以只读模式 (<code>&#39;r&#39;</code>) 打开 <code>arg</code> 指定的文件。</p><ul><li><code>arg</code> 是从命令行传入的文件名。</li><li>如果文件存在并且没有权限问题，则会成功打开。</li></ul></li><li><p><strong><code>except IOError:</code></strong></p><p>如果在 <code>try</code> 块中打开文件时发生了 <code>IOError</code>（比如文件不存在、无法读取或权限问题），程序将跳到 <code>except</code> 块。</p></li><li><p><strong><code>print(&#39;cannot open&#39;, arg)</code></strong></p><p>捕获到 <code>IOError</code> 后，打印错误信息，告知用户哪个文件无法打开。</p></li><li><p><strong><code>else:</code></strong></p><p>如果没有异常发生，程序将跳到 <code>else</code> 块，执行文件打开成功后的操作。</p></li><li><p><strong><code>print(arg, &#39;has&#39;, len(f.readlines()), &#39;lines&#39;)</code></strong></p><ul><li><code>f.readlines()</code> 读取文件中的所有行，并返回一个列表。</li><li><code>len(f.readlines())</code> 计算文件中的行数。</li><li>打印文件名和行数，告诉用户该文件有多少行。</li></ul></li><li><p><strong><code>f.close()</code></strong></p><p>读取完文件后，调用 <code>f.close()</code> 关闭文件。</p><p>关闭文件是一个良好的编程习惯，确保资源被释放，不会占用系统资源。</p></li></ol></details><details class="hint-container details"><summary>🧑‍💻 进阶优化建议</summary><p>如果你希望代码更简洁且现代，可以使用 <code>with open()</code> 来自动管理文件的打开和关闭，而不需要手动调用 <code>f.close()</code>。这样即使发生异常，文件也会在退出 <code>with</code> 块时自动关闭。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> arg </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> sys.argv[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">:]:</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">        # 使用with语句，Python会自动管理文件的关闭</span></span>
<span class="line"><span style="color:#F92672;">        with</span><span style="color:#66D9EF;"> open</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> f:</span></span>
<span class="line"><span style="color:#88846F;">            # 读取文件并计算行数</span></span>
<span class="line"><span style="color:#66D9EF;">            print</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;has&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(f.readlines()), </span><span style="color:#E6DB74;">&#39;lines&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> IOError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">        # 如果文件无法打开，捕获IOError并打印错误信息</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cannot open&#39;</span><span style="color:#F8F8F2;">, arg)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个优化版本中，<code>with open</code> 会在 <code>with</code> 语句块结束时自动关闭文件。这样可以确保即使发生异常，文件也会被正确关闭，避免资源泄漏。</p></details><h4 id="_2-4-2-运行示例-命令行操作" tabindex="-1"><a class="header-anchor" href="#_2-4-2-运行示例-命令行操作"><span>2.4.2 运行示例（命令行操作）</span></a></h4><p>在终端中输入（假设文件都在同一目录）：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F8F8F2;">python code.py file1.txt file2.txt nofile.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中：</p><ul><li><code>code.py</code> 是你的python 文件（保存上面那段代码）</li><li><code>file1.txt</code> 和 <code>file2.txt</code> 是存在的文件。</li><li><code>nofile.txt</code> 是一个不存在的文件，用来触发异常。</li></ul><p>在 Pycharm 中选中 <code>code.py</code> 文件，右键→打开于→终端</p><figure><img src="/assets/image-20251103154529491-BCwLOr5l.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAU0AAAA+CAIAAAAgU95IAAAAAXNSR0IArs4c6QAADWRJREFUeJzt3HlcU2e6B/DnTQiEgITViAIRUCrInoCR1RVFrbh0dFxqx61+pq0drzO97dy57e3Ymbmd0Xptp7UdbWtL0WrntlKruFxwQZA1IFsUEKPsISwSWQJZ3vsHREKFEBS3M8/3L+Cc874PL+d3zntO3g/EQ+gFCCFGYz3pAhBCjxzmHCHmw5wjxHyYc4SYD3OOEPNhzhFiPsw5QsyHOUeI+TDnCDEf5hwh5sOcI8R8mHOEmA9zjhDzYc4RYj6LJ10AQo/QF19+bWLr5k0vPcZaniS8nyPEfJhzhJgPc44Q82HOEWI+zDlCzIc5R4j5zMi5zaQAf3dLSh9HOQ+K2kwO8BNw4akuEqEnxVTOKdhNX/ab/979p98sC+I9xpoehH3oqt++/7f3XonzfnyVUmoR+vLHn+/d6Md6Zq4vz2LN6OGx+fYOQ26g1DZk03++Ns+lLu2r/YcvKnofe2mjoqosKGux8Zu9ZEGoRcWVa6068w+dsmbP7p3rEhKWL31+0dzoUE/buzcr6rspGfFAQvQNXS6xc8Kta84VNOiH3Md68qy1W19ev3b1srjoEE+b1qpypXo0v5cBnfHqwV3PQ/b5is6RC3vImillTZn9izmT1ZXyVj15qO7GsGXKchSt+ff/2LFxZYLP3XMZt7RmHZ6QsNzE1hM/Jo+qhmfXsPdzq5A1G6Lsb/6we++xrGrV0CfE04MQbXtVetL7H5xRTIrfuNJzlBN42lVy/OMP9/8j8aS00zN++xsvBnDMe06hsku5Sl5IpIQ71P7Ububmnb8S28gvHfvy8E/Sbu8l23esELKf8I3UdM0AAGDpGb4oPtzrESyWfMCWqZ3vijf+69ezHerkTWNf1L+AoXNOKS9iTrid8uJ3KTW6Mb2iP1JEI0/+30yVIHpuKGd0R+pabkqlBXkZ577d82mqwiVyQbi1eT2SW5dzaqwCImbyh9hqGx4dzKs6te/AycvZV9KOfZSU0+MWHTV1dKWNOdM1P538lm2Ln9CQsu+dj7Ob798q8A0ScPAxxJThLqxTvL04bTmFchhFyKlF+KsfvjIlb8/OQyVACABQdvDWfTt8pbt/e6gUCKEU+D4LV70w29fNkattlRecPnr0Qm1PfxdT1ux5S1J2KEkbsyrC3aa35WZucuK30ia9OS3fq0FTWnitO9bbRwgFVQ8wHITAzcqbPQu8J4wHqB74ua14yx82zbBpPv/ZriOywTPGusvZ8sUvSKJcLqT8/BQUODtBV0VtG/SNouba6UOHrnW3GIaLAt9vyS9XRD830cFS3VZTmvrP787JDdNySjluMetfXCJyt4PWitQjhYNuvqZHkk5dt+etGSVfJOpifjlz8rjeNnnBj199m9Vw75I9XM00YONHO2Jt+3db/8mh9QBAqU56YOOnOWTkfqmt35INK2f5TXSwZWtUSrk05fA3V+r05rRsWmfl6Y9+PFvaDjauQ2z1mPXqlm11uak/nTwrVWiemdvS4zRMzjn2dtbQ1qIcXWOagvxSdWig6DlSUg4AAKzpogBee35uWV8UiWDhKztXucjTzhy+2WXvExv/q9+N633n75mqe0FlTZs9q7Lwx8R0u2lzF83fuk1Vt+tEIyEjtjyANt+5A3b8oV86mEWr0QKbPXhgOHwHvhWH4+BoYwGgHby/8lJOxYrVkhjBqe8Vg4thETZQ/b18kp7aqxm1YLh0EtfFr+1Y6VSVeuZwVZf91NiF6/7NXvP23gvthACAhffKV16K4pSd/SG5utclKH62UA8991oeeSSB7Ts3tiw/OSndxitm8ZxN21rl76YoRqr59oWvD8gswNJv8eYouHTolEwDAEBbKs3q1zJs3a9X+DdcSE683qyxdA2JT9i4vbfhzSNyQkZs2bTqrLMmtuYlvsdemLB44fZd825h2oc0TM4tOGwAnU4zqrYI0RZKi3vEwSIfKK8ASmF6aKCN6qpURvtObmFM7BRt3v7/SSrQEICsoi7n3evnRjhlnmk1NGHdmf/5wTNtBCCrku3xl2WB/vwTjaqRWzbSq9UBm8V+sOEYTmvqB78rcrbqaGpT//wEIqQjM7N4xSZJjOf3/7w1ijaF0dFevbmG0cgu7Bq/98WYCMcLp9sAANzFIQK19NO/H5NqCUC2nPPnd92Mjh1xJIHXlnMw6ZwKALLKQLh3ja+/bYqi03TNRHWrIOcWpVy72M0AtdLsbHX/VYCY06+rUMjrvnrqm7PFhADA1aqq4smsTg6AduSWH0pnTfb3H2enuM9YuHTRgtd2zbudm3rip7MFTZh2gzFeJ9NbkF+mdggU+QAAwLTQAH57UZ7McEcTuDiDsqGebc3lcrlcrra+/g5xcREYHd9dX2M4UxX1jRqwHTfOrJYfNUL0Xc1NbcO8Ku/KySzuHh8eMx1Gs8pA4OwELQ21hg8yOmvq28HZeUL/tw78caBqURiutLX1DcZNjzyS0Kmob+//8o6iqbOHa2s/BjWb7LfxdnWXddDSzSvmRYX5T3Wzbb2WmyNrMu/F+Bjorsk5/sk7b7x98JLKZ+nGBU/6PchTZbjn8wddFtM3wQ4SC49U3PIRBdqrivIGnp/ZbDaZvPzP+wc+6qC0Y9AMWa+jRtv0QAjLrJaNEEKAPuYFMxppprRdHBYVdKSsSGvG/gB9owF6/cAHgBTA6HmBEGL8R6D6QX+RkUcS9HrDhySEXP3i9W1jVbOJfnvykj4TrI0PkywSOfOtLfS9ytIT+z85VaV9XK9yKXeSeMGSRbOmj2svrWk144B/GcPkXN2lpuDCGwegGlVzAxNs4RELUZCDqjC/bGBqrdPpaO3FT49KuweO0LbcHoOWjdha80Dd3TWqsgex4FiATmf2qQ8AhNCSjNzWqJhIMbcoe+ApWk91QFj3SqRcd5HESy27KGsifaMBLKMHDAIAWq2hX0qp8VWMsAZl5WFG0nTNppnul5AO2akDslNAKbGyn+S/dNu2ZatjM/6SNrqT6IHYuEvili6aI3JWl2ee2PPhxWvtOpy0Dxhm3k7rGhUwwcN72OWugpgtf/jjmxvC7O/bobcgv0wtCAwNC/Yf316Ubzy1ViibgQcqWalMViaTlZXVqgibUrNX4JhoeYD9FA97UCjqzG10MErB08fLStfU2PSzn7N4ji723OEPrEjPabAKiIjgGQ2IorkFeK6TDO8EOdMWvPTi8mDD9FmhbAYnVzfL/m9t3CfyoVlZ3/9tW/tdsHMSGD4fdJvoanzaPuRImqgZwDAXMJpLmdmv68xV65eJHCglhPa210rzKjrYTk7OZrX8MNzmbH/vr7s2RNiWJ//t92+9fzjtOob8Z4a+nxNSU1CkiJ83e75r+qnGIXaYGDF/prcH9ZovPp6benfwNk1Bfql6q3g521VVfLTE+KZ0O/3SjbkvbHq9OzX3dgdvYsjs+FBuxp43y81d+jB8y30oJV5xsd606vu81tG94GE7eYlEXDbPyVsyf45AmXk4t3tQA45zd/5pnb9lV+5nb3wive9VXN+IZeTKFz4fGel4/v/a+n/YkXelKGHLkte3cs6Xtlq5z4iXWNWmZN4wjMbl9Kp5v1izY61jprzbbmpMvH9P0aGsO/391kivNsXNW719tX1Wdc/4oBkh1nroGLORHL5mACCkt7quGaJnrpijquiiAJqma9JbKjJiv2re5MglkQJLh4yqVi3H2XeehN8lq6ozq2XTbCeH+gk4AGDlNg4APMSScA3oWyrzb7QCgLOz5fXjfz3Zfw/HhA9h2HWvbdV33KIWRAfxawqLFfe9f+oGp8BgIZFf/ul8hWrwyBKib2J5zJ/la38394fEAqXRVtpxo6RSMzE4IjI6SvScQH8749vPj5Uazl7HgLgoN2XW6UJlX4BdRYvDHeQXU68ZzgMTLfet3BZEbHnthWkdlz7/Mktp/rJKx4C46GmevuGSMJG/l2PPjYtJB78r7Bi87tXC2W9m4ETSdj3rfLFSP3TLHQqr6XExQnVOenn/r0R6qkuvqxyeE0siI0N9nHtvpCV+kVxpeKSgHTdKqjQT/CURURFBHnZ3ipO//Oa8wvDWSt9aUXHXwSdUMmNGkDur/ERWT3iAbUXahb51r6ZHEpwC46LcFFmni5UjDML9NfdpkddaeIojZ8VGhIeLRL60rL8p0/12y8sbuMLA8Kio6ChxgCe/Q3b268RLjRpzWjZtSsKb21fGiMVhwUI+IXxhSJhYHBbMvXkyvw4AGsuySuTNPUMtVcZ1r32Ih9BruG0cz0Wvb185jdNUkpZ04Hip+ileGEftgla9vHaWr5MqP2nfgQuKJzFto5QXu3PfBpe0Xb8/Wv0Uj5WxZ7HmUcH/A9nH1IOSRp7ywdvvfZVezRNMsDSx39PAxnU8q+rcP9794/4nE3IAIKQr+0pRj0AS7fvMBOZZrBk9AFP3c4SedXg/74P/TwYh5sOcI8R8mHOEmA9zjhDz4Xs4hJgP7+cIMR/mHCHmw5wjxHyYc4SYD3OOEPNhzhFiPsw5QsyHOUeI+TDnCDEf5hwh5sOcI8R8mHOEmA9zjhDzYc4RYj7MOULMhzlHiPkw5wgxH+YcIeb7f5Pz1sOqiOewAAAAAElFTkSuQmCC" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>路径是 <code>code.py</code> 所在文件夹，没有问题，输入上述代码即可得到：</p><figure><img src="/assets/image-20251103154601105-D2_pc1gX.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_2-4-3-命令行操作路径问题处理" tabindex="-1"><a class="header-anchor" href="#_2-4-3-命令行操作路径问题处理"><span>2.4.3 命令行操作路径问题处理</span></a></h4><p>具体来说，<code>file1.txt</code> 和 <code>file2.txt</code> 等仅仅是文件名，而不是绝对路径，因此当文件和代码不在同一目录的时候，Python 无法在当前工作目录中找到这些文件。</p><ul><li><p>方案一：使用绝对路径（文件与代码不在同一路径）</p><p>在运行时，将文件的绝对路径写出来，例如：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F8F8F2;">python D:\</span><span style="color:#F44747;">Coder\test 1\code.py C:\Users\12390\Desktop\file1.txt  # 注意 Mac 系统和 Linux 都是 /</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>方案二：代码中处理相对路径问题</p><p>修改代码以使用绝对路径，可以适配不同系统格式不同的问题。</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 获取当前脚本的路径</span></span>
<span class="line"><span style="color:#F8F8F2;">current_directory </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> os.path.dirname(os.path.abspath(__file__))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> arg </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> sys.argv[</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">:]:</span></span>
<span class="line"><span style="color:#F8F8F2;">    file_path </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> os.path.join(current_directory, arg)  </span><span style="color:#88846F;"># 将文件名与当前路径拼接</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        f </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> open</span><span style="color:#F8F8F2;">(file_path, </span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> IOError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;cannot open&#39;</span><span style="color:#F8F8F2;">, file_path)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;has&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(f.readlines()), </span><span style="color:#E6DB74;">&#39;lines&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        f.close()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div></li></ul><p><strong>解释</strong>：</p><ol><li><p><code>os.path.abspath(__file__)</code> 获取当前脚本文件的绝对路径。</p></li><li><p><code>os.path.dirname()</code> 获取当前脚本所在目录。</p></li><li><p>使用 <code>os.path.join(current_directory, arg)</code> 将传入的文件名与当前目录拼接，得到绝对路径。</p><p>这样，无论你从哪里运行脚本，都会自动处理相对路径问题，确保能找到文件。</p></li></ol><p><strong>总结</strong>：</p><ul><li>如果你使用相对路径运行脚本时出现找不到文件的问题，请确保文件与脚本在同一目录，或者在运行命令时提供文件的绝对路径。</li><li>如果你想更健壮地处理路径问题，可以修改代码，自动拼接文件路径。</li></ul><div class="hint-container tip"><p class="hint-container-title">现在的代码是需要终端运行，终端运行类似于和用户的交互界面，不需要打开代码文件，只需要在终端输入需要打开的文件，代码 <code>code</code> 文件就会用 <code>argv</code> 这个功能调用需要打开的文件，运行代码。</p><p>那么如何修改成不使用终端运行，达到同样的输出结果呢？即打开代码文件，右键运行即可。</p></div><p>因为需要操作的文件和代码在同一路径下，因此代码运行时可以直接调用，只需要在代码里告诉文件名。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="v-3" aria-selected="true">普通版本</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="v-4" aria-selected="false">交互版本</button></div><!--[--><div class="vp-code-tab active" id="v-3" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">普通版本</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">files </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [</span><span style="color:#E6DB74;">&#39;file1.txt&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;file2.txt&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&#39;nofile.txt&#39;</span><span style="color:#F8F8F2;">]     </span><span style="color:#88846F;"># 告诉程序我需要打开的文件名，整理成一个列表</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> arg </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> files:                           </span><span style="color:#88846F;"># 将原本获取文件名的方法 sys.argv[1:] 替换为我们创建的文件名列表</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        f </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> open</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> IOError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;can not open&#39;</span><span style="color:#F8F8F2;">, arg)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;has&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(f.readlines()), </span><span style="color:#E6DB74;">&#39;lines&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        f.close()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="v-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">交互版本</div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 用户输入文件名，用空格分割</span></span>
<span class="line"><span style="color:#F8F8F2;">files </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;请输入要统计的文件名（空格分割）：&quot;</span><span style="color:#F8F8F2;">).split()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> arg </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> files:   </span><span style="color:#88846F;"># 将原本获取文件名的方法 sys.argv[1:] 替换为我们创建的文件名列表</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        f </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> open</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;r&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> IOError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;can not open&#39;</span><span style="color:#F8F8F2;">, arg)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(arg, </span><span style="color:#E6DB74;">&#39;has&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(f.readlines()), </span><span style="color:#E6DB74;">&#39;lines&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        f.close()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="_2-5-try-finally-语句" tabindex="-1"><a class="header-anchor" href="#_2-5-try-finally-语句"><span>2.5 try-finally 语句</span></a></h3><p><code>try-finally</code> 语句无论是否发生异常都将执行最后代码。</p><figure><img src="/assets/image-20251106145457040-C7qsYx3U.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container tip"><p class="hint-container-title">提示</p><p>保命的手段：如果我们在处理文件时，系统发生错误或者文件数据出现不可预料的异常。为防止异常导致数据丢失，往往我们会在处理异常的时候添加 finally 进行最后操作，例如：报错文件操作，出错的文件保存避免丢失等；</p></div><p>以下实例中 finally 语句无论异常是否发生都会执行：</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    Ran()               </span><span style="color:#88846F;"># 故意写错，此函数不存在</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> AssertionError</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> error:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(error)</span></span>
<span class="line"><span style="color:#F92672;">else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">        with</span><span style="color:#66D9EF;"> open</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;file.log&#39;</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> file:</span></span>
<span class="line"><span style="color:#F8F8F2;">            read_data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> file.read()</span></span>
<span class="line"><span style="color:#F92672;">    except</span><span style="color:#66D9EF;font-style:italic;"> FileNotFoundError</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> fnf_error:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(fnf_error)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">finally</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;这句话，无论异常是否发生都会执行。&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">这句话，无论异常是否发生都会执行。</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    Ran()               </span><span style="color:#88846F;"># 故意写错，此函数不存在</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">: name </span><span style="color:#E6DB74;">&#39;Ran&#39;</span><span style="color:#F92672;"> is</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> defined</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_3-抛出异常" tabindex="-1"><a class="header-anchor" href="#_3-抛出异常"><span>3. 抛出异常</span></a></h2><h3 id="_3-1-基础语法" tabindex="-1"><a class="header-anchor" href="#_3-1-基础语法"><span>3.1 基础语法</span></a></h3><p>Python 使用 <code>raise</code> 语句抛出一个指定的异常。</p><p><code>raise</code> 语法格式如下：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">raise</span><span style="color:#F8F8F2;"> [Exception [, args [, traceback]]]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="/assets/image-20251106150543624-BxdEmFP6.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以下实例如果 x 大于 5 就触发异常：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F8F8F2;">x </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 10</span></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> x </span><span style="color:#F92672;">&gt;</span><span style="color:#AE81FF;"> 5</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> Exception</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;x 不能大于 5。 x 的值为：</span><span style="color:#AE81FF;">{}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">.format(x))     </span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">3</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> Exception</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;x 不能大于 5。 x 的值为：</span><span style="color:#AE81FF;">{}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">.format(x))</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">Exception</span><span style="color:#F8F8F2;">: x 不能大于 </span><span style="color:#AE81FF;">5</span><span style="color:#F8F8F2;">。 x 的值为：</span><span style="color:#AE81FF;">10</span><span style="color:#88846F;">       # 自定义了报错显示的文本</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果没定义报错的内容，结果如下：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F8F8F2;">x </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 10</span></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> x </span><span style="color:#F92672;">&gt;</span><span style="color:#AE81FF;"> 5</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#E6DB74;"> &#39;x 不能大于 5。 x 的值为：</span><span style="color:#AE81FF;">{}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">.format(x)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">3</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#E6DB74;"> &#39;x 不能大于 5。 x 的值为：</span><span style="color:#AE81FF;">{}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">.format(x)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">TypeError</span><span style="color:#F8F8F2;">: exceptions must derive </span><span style="color:#F92672;">from</span><span style="color:#66D9EF;font-style:italic;"> BaseException</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-思考" tabindex="-1"><a class="header-anchor" href="#_3-2-思考"><span>3.2 思考</span></a></h3><div class="hint-container tip"><p class="hint-container-title">思考一下为什么会存在 raise?</p><ul><li>思考一：Python 提供的报错主要是给程序员看的，raise 可以是程序员写给用户看的。</li><li>思考二：程序运行时，并不是所有错误都能自动被检测出来。有时候我们知道某种情况“不合理”，就需要<strong>主动抛出错误</strong>来提醒或中断程序。</li></ul></div><h3 id="_3-3-例子-输入校验" tabindex="-1"><a class="header-anchor" href="#_3-3-例子-输入校验"><span>3.3 例子：输入校验</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> divide</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">a</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">b</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> b </span><span style="color:#F92672;">==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">        raise</span><span style="color:#66D9EF;font-style:italic;"> ValueError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;分母不能为0&quot;</span><span style="color:#F8F8F2;">)    </span><span style="color:#88846F;"># 主动抛出异常</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> a </span><span style="color:#F92672;">/</span><span style="color:#F8F8F2;"> b</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果用户输入 <code>divide(10, 0)</code> ，程序不会继续执行，而是立即抛出：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#66D9EF;font-style:italic;">ValueError</span><span style="color:#F8F8F2;">: 分母不能为0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这可以防止程序做出错误计算。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>raise 的存在是为了让程序能够<strong>主动发现问题，明确失败原因，优雅地处理错误</strong>。</p></div><div class="hint-container info"><p class="hint-container-title">补充说明</p><p>raise 后存在唯一的参数，指定了要被抛出的异常，它必须是一个异常的实例或者是异常的类（也就是 Exception 的子类），也可以自定义内容（见输入校验）。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">raise</span><span style="color:#66D9EF;font-style:italic;"> ValueError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;分母不能为0&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>例如上述代码中 raise 指定了 BaseException 子类的 ValueError 异常。</p><p>如果你只想知道这是否抛出了一个异常，并不想去处理它，那么一个简单的 raise 语句就可以再次把它抛出。</p><blockquote><p>换句话说：只想知道程序有没有出现问题，有没有遇到报错时，直接写一个 raise 即可，类似实现一个提醒。</p><p>专业说法：raise 用在 except 块中，不带参数，表示重新抛出当前捕获的异常，也就是抛出 try 遇到的错误，这样既能保证程序正常进行，又能了解遇到的错误！</p></blockquote><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> NameError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;HiThere&#39;</span><span style="color:#F8F8F2;">)    </span><span style="color:#88846F;"># 模拟一个异常</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> NameError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;An exception flew by~&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    raise</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">An exception flew by</span><span style="color:#F92672;">~</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> NameError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;HiThere&#39;</span><span style="color:#F8F8F2;">)    </span><span style="color:#88846F;"># 模拟一个异常</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">NameError</span><span style="color:#F8F8F2;">: HiThere</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="_4-补充说明" tabindex="-1"><a class="header-anchor" href="#_4-补充说明"><span>4. 补充说明</span></a></h2><p>想象它就像一个紧急刹车：</p><ul><li><code>raise Exception</code> = 立即刹车停下</li><li>没有 <code>raise</code> = 正常行驶</li><li><code>try/except</code> = 踩了刹车但又重新启动</li></ul><h2 id="_5-assert-断言" tabindex="-1"><a class="header-anchor" href="#_5-assert-断言"><span>5. assert（断言）</span></a></h2><figure><img src="/assets/image-20251106154957293-CmUKqj9_.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Python assert （断言）用来判断一个表达式，在表达式条件为 false 时触发异常。</p><h3 id="_5-1-基础语法" tabindex="-1"><a class="header-anchor" href="#_5-1-基础语法"><span>5.1 基础语法</span></a></h3><p>语法格式：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">assert</span><span style="color:#F8F8F2;"> expression</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>等价于：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">if</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> expression:</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> AssertionError</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>assert 后面也可以紧跟参数：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">assert</span><span style="color:#F8F8F2;"> expression [, arguments]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>等价于：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">if</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> expression:</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> AssertionError</span><span style="color:#F8F8F2;">(arguments)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>例子：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">assert</span><span style="color:#AE81FF;"> True</span><span style="color:#88846F;">      # 条件为 True 的时候正常执行</span></span>
<span class="line"><span style="color:#F92672;">assert</span><span style="color:#AE81FF;"> False</span><span style="color:#88846F;">     # 条件为 False 的时候报错</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    assert</span><span style="color:#AE81FF;"> False</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">AssertionError</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">assert</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;">==</span><span style="color:#AE81FF;">1</span><span style="color:#88846F;">      # 条件为 True 的时候正常执行</span></span>
<span class="line"><span style="color:#F92672;">assert</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;">==</span><span style="color:#AE81FF;">2</span><span style="color:#88846F;">     # 条件为 False 的时候报错</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    assert</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;">==</span><span style="color:#AE81FF;">2</span><span style="color:#88846F;">     # 条件为 False 的时候报错</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">AssertionError</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">assert</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;">==</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&quot;1不等于2&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    assert</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;">==</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#E6DB74;">&quot;1不等于2&quot;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">AssertionError</span><span style="color:#F8F8F2;">: </span><span style="color:#F44747;">1不等于2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-实例" tabindex="-1"><a class="header-anchor" href="#_5-2-实例"><span>5.2 实例</span></a></h3><p>断言可以在条件不满足程序运行的情况下直接返回错误，而不必等待程序运行后出现崩溃的情况，例如我们的代码只在 Linux 系统下运行，可以先判断当前系统是否符合条件。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"><span style="color:#F92672;">assert</span><span style="color:#F8F8F2;"> (</span><span style="color:#E6DB74;">&#39;linux&#39;</span><span style="color:#F92672;"> in</span><span style="color:#F8F8F2;"> sys.platform), </span><span style="color:#E6DB74;">&quot;该代码只在 Linux 系统下执行&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 接下来要执行的代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># ------- output -------</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:\Coder</span><span style="color:#AE81FF;">\t</span><span style="color:#E6DB74;">est 1\code.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F92672;">    assert</span><span style="color:#F8F8F2;"> (</span><span style="color:#E6DB74;">&#39;linux&#39;</span><span style="color:#F92672;"> in</span><span style="color:#F8F8F2;"> sys.platform), </span><span style="color:#E6DB74;">&quot;该代码只在 Linux 系统下执行&quot;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">AssertionError</span><span style="color:#F8F8F2;">: 该代码只在 Linux 系统下执行</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若不写 <code>, &quot;该代码只在 Linux 系统下执行&quot;</code> ，则只会报错 <code>AssertionError</code> ，无内容。</p><h3 id="_5-3-sys-platform-各个平台常见的值" tabindex="-1"><a class="header-anchor" href="#_5-3-sys-platform-各个平台常见的值"><span>5.3 sys.platform 各个平台常见的值</span></a></h3><table><thead><tr><th>操作系统</th><th><code>sys.platform</code> 返回值</th><th>备注</th></tr></thead><tbody><tr><td><strong>Linux (各发行版，如 Ubuntu, Debian, CentOS)</strong></td><td><code>&#39;linux&#39;</code></td><td>旧版本 Python 可能返回 <code>&#39;linux2&#39;</code>（Python 2 时代）</td></tr><tr><td><strong>Windows (包括 Win10 / Win11)</strong></td><td><code>&#39;win32&#39;</code></td><td>无论 32 位还是 64 位 Python，始终是 <code>&#39;win32&#39;</code></td></tr><tr><td><strong>macOS (含 Intel / Apple Silicon)</strong></td><td><code>&#39;darwin&#39;</code></td><td>取自 Darwin 内核名称</td></tr><tr><td><strong>WebAssembly (Pyodide / Emscripten 环境)</strong></td><td><code>&#39;emscripten&#39;</code> 或 <code>&#39;wasi&#39;</code></td><td>浏览器或 WASI 环境中运行 Python</td></tr></tbody></table><p>因此可以改成根据系统类型执行不同的代码，例如：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#E6DB74;"> &#39;linux&#39;</span><span style="color:#F92672;"> in</span><span style="color:#F8F8F2;"> sys.platform:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;当前系统：Linux&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">    # Linux 专属代码</span></span>
<span class="line"><span style="color:#F92672;">elif</span><span style="color:#E6DB74;"> &#39;win&#39;</span><span style="color:#F92672;"> in</span><span style="color:#F8F8F2;"> sys.platform:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;当前系统：Windows&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">    # Windows 专属代码</span></span>
<span class="line"><span style="color:#F92672;">elif</span><span style="color:#E6DB74;"> &#39;darwin&#39;</span><span style="color:#F92672;"> in</span><span style="color:#F8F8F2;"> sys.platform:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;当前系统：macOS&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;">    # macOS 专属代码</span></span>
<span class="line"><span style="color:#F92672;">else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    raise</span><span style="color:#66D9EF;font-style:italic;"> RuntimeError</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;不支持的系统平台&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果只是想允许所有系统运行：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code class="language-python"><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> sys</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;当前系统: </span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">sys.platform</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;"># 后续代码...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>更新日志</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2025/11/6 08:10</span></div><div><span class="vp-changelog-menu-icon"></span><span>查看所有更新日志</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>90e6e</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Add section on assert statements with examples and platform-specific assertions</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-11-06T08:10:15.000Z">2025/11/6</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>1c013</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Add PNG image for Python 3 Errors and Exceptions section</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-11-06T07:46:06.000Z">2025/11/6</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>092a4</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">Add comprehensive guide on Python 3 errors and exceptions</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-11-03T08:07:13.000Z">2025/11/3</time></span></li><!--]--></ul></div><!--]--><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/AmaraMeng/AmaraMeng.github.io/edit/main/src/programming/python/16-python3-errors-and-exceptions.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><!----><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: ranmeng9558@gmail.com">AmaraMeng</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/programming/python/15-environment.html" aria-label="15. 虚拟环境和 Jupyter Notebook 的使用"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><i class="vp-icon iconfont icon-boke" sizing="height"></i>15. 虚拟环境和 Jupyter Notebook 的使用</div></a><a class="route-link auto-link next" href="/programming/python/17-TBSgame.html" aria-label="17. 回合制打怪游戏设计（文字版）"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">17. 回合制打怪游戏设计（文字版）<i class="vp-icon iconfont icon-boke" sizing="height"></i></div></a></nav><div id="comment" class="waline-wrapper vp-comment" vp-comment darkmode="false" style="display:block;"><!----></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 Ran </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CbaWUCSL.js" defer></script>
  </body>
</html>
